const _0x577120=_0x10a5;(function(_0x2de003,_0x372853){const _0x38286d=_0x10a5,_0x116ba3=_0x2de003();while(!![]){try{const _0x3bce1e=-parseInt(_0x38286d(0x1bd))/0x1*(-parseInt(_0x38286d(0x203))/0x2)+parseInt(_0x38286d(0x214))/0x3+parseInt(_0x38286d(0x1fe))/0x4*(parseInt(_0x38286d(0x205))/0x5)+-parseInt(_0x38286d(0x240))/0x6+parseInt(_0x38286d(0x283))/0x7*(-parseInt(_0x38286d(0x271))/0x8)+-parseInt(_0x38286d(0x26e))/0x9+-parseInt(_0x38286d(0x250))/0xa;if(_0x3bce1e===_0x372853)break;else _0x116ba3['push'](_0x116ba3['shift']());}catch(_0x24deba){_0x116ba3['push'](_0x116ba3['shift']());}}}(_0x4388,0xcbd27));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';import{getAuth,signInAnonymously,signInWithCustomToken,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,onSnapshot,serverTimestamp,runTransaction,deleteDoc,Timestamp,deleteField,increment}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';const defaultFirebaseConfig={'apiKey':'AIzaSyAJsk4l8I8uCYpJY8jZLAlRW1w2qLWN-2o','authDomain':'game24-69666.firebaseapp.com','projectId':_0x577120(0x20b),'storageBucket':_0x577120(0x275),'messagingSenderId':_0x577120(0x1b7),'appId':_0x577120(0x21e),'measurementId':_0x577120(0x26f)},appId=typeof __app_id!==_0x577120(0x1e5)?__app_id:_0x577120(0x260),firebaseConfig=typeof __firebase_config!=='undefined'?JSON[_0x577120(0x230)](__firebase_config):defaultFirebaseConfig,$=_0x526dfb=>document[_0x577120(0x257)](_0x526dfb),$$=_0xa5e1ea=>Array['from'](document[_0x577120(0x1f5)](_0xa5e1ea)),playerJoinView=$(_0x577120(0x1d0)),playerWaitView=$('#player-wait-view'),adminLobbyView=$(_0x577120(0x270)),gameView=$(_0x577120(0x1c4)),adminLoginModal=$(_0x577120(0x1bc)),adminSettingsModal=$('#admin-settings-modal'),gameOverView=$(_0x577120(0x1fb)),grid=$(_0x577120(0x1ef)),playerList=$(_0x577120(0x1bf)),lobbyPlayerNameList=$('#lobby-player-name-list'),lobbyPlayerCount=$(_0x577120(0x1cc)),hostControls=$('#host-controls'),toastEl=$(_0x577120(0x20c)),gameCodeDisplay=$(_0x577120(0x228)),gameTimerEl=$(_0x577120(0x1ce)),puzzleProgressEl=$('#puzzle-progress'),playerScoreDisplay=$('#player-score-display'),gameBoard=$(_0x577120(0x248)),playerFinishedView=$(_0x577120(0x278)),podiumContainer=$(_0x577120(0x1f4)),otherRankingsList=$(_0x577120(0x26a)),otherRankingsContainer=$(_0x577120(0x1c5)),toggleLeaderboardBtn=$(_0x577120(0x24e));let db,auth,userId,currentPlayerName,isHost=![],currentGameId=null,isPracticeMode=![],unsubscribeGameListener=null,timerInterval=null,localBoard=[null,null,null,null],currentPuzzleNumbers=[],firstIndex=null,selectedOp=null,adminDisplayedPuzzleIndex=0x0,previousGameStatus=null,gameSettings={'numQuestions':0x5,'timeLimit':0xb4,'timerMode':'overall','scoringMode':_0x577120(0x1c2),'leaderboardMode':_0x577120(0x213)};function toast(_0x230907,_0x54a541=0x7d0){const _0x88fe3=_0x577120;toastEl[_0x88fe3(0x1c3)]=_0x230907,toastEl['classList'][_0x88fe3(0x272)]('show'),setTimeout(()=>toastEl[_0x88fe3(0x243)]['remove']('show'),_0x54a541);}const rnd=(_0x41cee1,_0x58f58a)=>Math['floor'](Math[_0x577120(0x233)]()*(_0x58f58a-_0x41cee1+0x1))+_0x41cee1;function gcd(_0x1a9a6b,_0x24cabe){return _0x24cabe===0x0?_0x1a9a6b:gcd(_0x24cabe,_0x1a9a6b%_0x24cabe);}const fmt=_0x292d4d=>{const _0x5ec94a=_0x577120;if(_0x292d4d['d']===0x1)return String(_0x292d4d['n']);const _0x2a8233=String(_0x292d4d['n'])[_0x5ec94a(0x1ec)]>0x2||String(_0x292d4d['d'])[_0x5ec94a(0x1ec)]>0x2?_0x5ec94a(0x22b):_0x5ec94a(0x24a);return _0x5ec94a(0x21d)+_0x2a8233+_0x5ec94a(0x1d3)+_0x292d4d['n']+'/'+_0x292d4d['d']+_0x5ec94a(0x218);},themeKey='g24_theme_mp',themeSelect=$(_0x577120(0x216));function applyTheme(_0x1c86b1){const _0x3dcf13=_0x577120;document[_0x3dcf13(0x229)]['setAttribute'](_0x3dcf13(0x25a),_0x1c86b1),localStorage['setItem'](themeKey,_0x1c86b1);}const savedTheme=localStorage[_0x577120(0x239)](themeKey),initialTheme=savedTheme||_0x577120(0x1db);applyTheme(initialTheme);themeSelect&&(themeSelect[_0x577120(0x22f)]=initialTheme,themeSelect[_0x577120(0x1df)]('change',()=>applyTheme(themeSelect[_0x577120(0x22f)])));function solve24(_0x2a584a){function _0x2427d9(_0x3e7454){const _0x503a19=_0x10a5;if(_0x3e7454[_0x503a19(0x1ec)]===0x1)return Math['abs'](_0x3e7454[0x0]-0x18)<0.000001;for(let _0x37195=0x0;_0x37195<_0x3e7454[_0x503a19(0x1ec)];_0x37195++){for(let _0x200ed2=0x0;_0x200ed2<_0x3e7454[_0x503a19(0x1ec)];_0x200ed2++){if(_0x37195===_0x200ed2)continue;const _0x46aac6=_0x3e7454[_0x37195],_0x57cea5=_0x3e7454[_0x200ed2],_0x1f6fd2=_0x3e7454['filter']((_0x1e2f35,_0x6cbe37)=>_0x6cbe37!==_0x37195&&_0x6cbe37!==_0x200ed2);if(_0x2427d9([_0x46aac6+_0x57cea5,..._0x1f6fd2])||_0x2427d9([_0x46aac6-_0x57cea5,..._0x1f6fd2])||_0x2427d9([_0x46aac6*_0x57cea5,..._0x1f6fd2])||_0x57cea5!==0x0&&_0x2427d9([_0x46aac6/_0x57cea5,..._0x1f6fd2]))return!![];}}return![];}return _0x2427d9(_0x2a584a);}function randomSolvable(){for(let _0x1dfe42=0x0;_0x1dfe42<0x1f4;_0x1dfe42++){const _0x1bbbbe=[rnd(0x1,0x9),rnd(0x1,0x9),rnd(0x1,0x9),rnd(0x1,0x9)];if(solve24(_0x1bbbbe))return _0x1bbbbe;}return[0x1,0x2,0x3,0x4];}function showView(_0x5e4fc1){const _0x367196=_0x577120;[playerJoinView,playerWaitView,adminLoginModal,adminLobbyView,adminSettingsModal,gameView,gameOverView][_0x367196(0x1f1)](_0x3461fa=>_0x3461fa[_0x367196(0x243)][_0x367196(0x272)]('hidden'));const _0x3deb74=$(_0x367196(0x1ff));if(_0x5e4fc1==='player-join'||_0x5e4fc1===_0x367196(0x211))_0x3deb74['classList'][_0x367196(0x27c)](_0x367196(0x25c));else isHost?_0x3deb74[_0x367196(0x243)]['remove'](_0x367196(0x25c)):_0x3deb74['classList'][_0x367196(0x272)](_0x367196(0x25c));if(_0x5e4fc1==='player-join')playerJoinView[_0x367196(0x243)][_0x367196(0x27c)]('hidden');else{if(_0x5e4fc1===_0x367196(0x24d))playerWaitView[_0x367196(0x243)][_0x367196(0x27c)](_0x367196(0x25c));else{if(_0x5e4fc1===_0x367196(0x211))adminLoginModal[_0x367196(0x243)][_0x367196(0x27c)]('hidden');else{if(_0x5e4fc1===_0x367196(0x22d))adminLobbyView[_0x367196(0x243)][_0x367196(0x27c)](_0x367196(0x25c));else{if(_0x5e4fc1===_0x367196(0x277))adminSettingsModal[_0x367196(0x243)]['remove'](_0x367196(0x25c));else{if(_0x5e4fc1===_0x367196(0x23f))gameView[_0x367196(0x243)][_0x367196(0x27c)](_0x367196(0x25c)),isPracticeMode?($('.sidebar')[_0x367196(0x243)][_0x367196(0x272)](_0x367196(0x25c)),document[_0x367196(0x226)][_0x367196(0x243)]['add'](_0x367196(0x212)),document['body'][_0x367196(0x243)][_0x367196(0x27c)](_0x367196(0x254)),$('#player-score-display')[_0x367196(0x243)][_0x367196(0x272)]('hidden'),$(_0x367196(0x231))[_0x367196(0x243)][_0x367196(0x272)](_0x367196(0x25c)),$(_0x367196(0x1ce))[_0x367196(0x1c3)]='โหมดฝึกซ้อม',$(_0x367196(0x258))[_0x367196(0x1dc)][_0x367196(0x1cd)]=_0x367196(0x1c6)):($(_0x367196(0x1f7))['classList'][_0x367196(0x27c)](_0x367196(0x25c)),$(_0x367196(0x258))[_0x367196(0x1dc)][_0x367196(0x1cd)]='');else{if(_0x5e4fc1===_0x367196(0x236))gameOverView[_0x367196(0x243)][_0x367196(0x27c)]('hidden');}}}}}}}async function initialize(){const _0x13aba1=_0x577120;try{if(!firebaseConfig[_0x13aba1(0x238)]){toast('Firebase\x20configuration\x20is\x20missing.'),console[_0x13aba1(0x274)](_0x13aba1(0x1f6));return;}const _0x54863c=initializeApp(firebaseConfig);db=getFirestore(_0x54863c),auth=getAuth(_0x54863c),onAuthStateChanged(auth,async _0x537509=>{const _0x961030=_0x13aba1;if(_0x537509)userId=_0x537509[_0x961030(0x21f)],console[_0x961030(0x202)](_0x961030(0x1e3),userId);else try{typeof __initial_auth_token!==_0x961030(0x1e5)&&__initial_auth_token?await signInWithCustomToken(auth,__initial_auth_token):await signInAnonymously(auth);}catch(_0x258e82){console[_0x961030(0x274)](_0x961030(0x27a),_0x258e82),toast(_0x961030(0x1f0));}});}catch(_0x572fc2){console[_0x13aba1(0x274)](_0x13aba1(0x245),_0x572fc2),toast('การเชื่อมต่อล้มเหลว');}}async function createGameRoom(){const _0x3c092d=_0x577120;showView(_0x3c092d(0x22d)),gameCodeDisplay[_0x3c092d(0x1c3)]=_0x3c092d(0x232);const _0x2dd514=rnd(0xa,0x63)['toString']();currentGameId=_0x2dd514;const _0x2d0950={'hostId':auth[_0x3c092d(0x265)]['uid'],'status':_0x3c092d(0x242),'players':{},'createdAt':serverTimestamp()},_0x48c901=doc(db,_0x3c092d(0x23c)+appId+_0x3c092d(0x1e8),currentGameId);await setDoc(_0x48c901,_0x2d0950),gameCodeDisplay[_0x3c092d(0x1c3)]=currentGameId,listenForGameUpdates(currentGameId);}async function handleStartGame(){const _0x3781aa=_0x577120;if(!isHost||!currentGameId)return;const _0x36bf0f=parseInt($(_0x3781aa(0x1c8))[_0x3781aa(0x22f)],0xa)||0xb4,_0x59fce1=document['querySelector'](_0x3781aa(0x227))[_0x3781aa(0x22f)];gameSettings[_0x3781aa(0x261)]=_0x36bf0f,gameSettings[_0x3781aa(0x1f8)]=_0x59fce1,adminSettingsModal[_0x3781aa(0x243)][_0x3781aa(0x272)](_0x3781aa(0x25c));const _0x3a042e=doc(db,_0x3781aa(0x23c)+appId+'/public/data/games',currentGameId);try{await runTransaction(db,async _0xc8d4ad=>{const _0x576080=_0x3781aa,_0x3ef248=await _0xc8d4ad[_0x576080(0x247)](_0x3a042e);if(!_0x3ef248[_0x576080(0x25d)]())throw _0x576080(0x1e6);const _0x4f5586=_0x3ef248[_0x576080(0x1c0)]()[_0x576080(0x24b)],_0x13353a=Array[_0x576080(0x1e7)]({'length':gameSettings['numQuestions']},()=>randomSolvable()),_0x3017f8={'status':_0x576080(0x282),'puzzles':JSON[_0x576080(0x23d)](_0x13353a),'startTime':serverTimestamp(),'gameMode':gameSettings};for(const _0x275a5f in _0x4f5586){_0x3017f8['players.'+_0x275a5f+_0x576080(0x1e1)]=0x0,_0x3017f8[_0x576080(0x1e9)+_0x275a5f+'.score']=0x0,_0x3017f8[_0x576080(0x1e9)+_0x275a5f+_0x576080(0x279)]=null,_0x3017f8['players.'+_0x275a5f+_0x576080(0x217)]=serverTimestamp();}_0xc8d4ad[_0x576080(0x1fc)](_0x3a042e,_0x3017f8);}),showView(_0x3781aa(0x23f));}catch(_0x8ff894){console['error']('Error\x20starting\x20game:',_0x8ff894),toast(_0x3781aa(0x281));}}async function forceEndGame(){const _0x1da563=_0x577120;if(!isHost||!currentGameId)return;const _0xefb45a=doc(db,_0x1da563(0x23c)+appId+_0x1da563(0x1e8),currentGameId),_0x4bd615=await getDoc(_0xefb45a);_0x4bd615['exists']()&&_0x4bd615[_0x1da563(0x1c0)]()['status']==='playing'&&await updateDoc(_0xefb45a,{'status':_0x1da563(0x27e)});}async function returnToLobby(){const _0x1b8f9b=_0x577120;if(!isHost||!currentGameId)return;const _0x3bb205=doc(db,_0x1b8f9b(0x23c)+appId+_0x1b8f9b(0x1e8),currentGameId);try{await updateDoc(_0x3bb205,{'status':_0x1b8f9b(0x242),'players':{},'puzzles':deleteField(),'startTime':deleteField(),'gameMode':deleteField()}),showView(_0x1b8f9b(0x22d));}catch(_0x4ea4b0){console[_0x1b8f9b(0x274)](_0x1b8f9b(0x23b),_0x4ea4b0),toast('เกิดข้อผิดพลาดในการกลับสู่ล็อบบี้');}}async function handleJoinGame(){const _0x360845=_0x577120,_0x535488=$('#game-code-input')[_0x360845(0x22f)],_0x5d3340=$(_0x360845(0x22e))[_0x360845(0x22f)][_0x360845(0x264)]();if(!_0x535488||!_0x5d3340)return toast(_0x360845(0x276));currentGameId=_0x535488,currentPlayerName=_0x5d3340;const _0x363b89=doc(db,'artifacts/'+appId+_0x360845(0x1e8),currentGameId);try{await runTransaction(db,async _0x2997c8=>{const _0xfafb4f=_0x360845,_0x405fe8=await _0x2997c8['get'](_0x363b89);if(!_0x405fe8[_0xfafb4f(0x25d)]())throw new Error(_0xfafb4f(0x1ee));const _0x49fcd6=_0x405fe8[_0xfafb4f(0x1c0)]();if(_0x49fcd6[_0xfafb4f(0x221)]!==_0xfafb4f(0x242))throw new Error(_0xfafb4f(0x23a));let _0x36b5a3=_0x5d3340;_0x49fcd6[_0xfafb4f(0x24b)][_0x36b5a3]&&(_0x36b5a3=''+_0x5d3340+rnd(0xa,0x63),toast('ชื่อซ้ำ,\x20เปลี่ยนเป็น\x20'+_0x36b5a3+_0xfafb4f(0x1e4))),currentPlayerName=_0x36b5a3,_0x2997c8[_0xfafb4f(0x1fc)](_0x363b89,{[_0xfafb4f(0x1e9)+_0x36b5a3]:{'joined':!![]}});}),toast(_0x360845(0x1d2)),listenForGameUpdates(currentGameId);}catch(_0x131117){console['error'](_0x360845(0x246),_0x131117),toast(_0x131117[_0x360845(0x1eb)]);}}function startPracticeMode(){const _0x17cab0=_0x577120;isPracticeMode=!![],isHost=![],currentPuzzleNumbers=randomSolvable(),resetLocalBoard(),showView(_0x17cab0(0x23f));}function listenForGameUpdates(_0x3d3cd1){const _0x598a28=_0x577120;if(unsubscribeGameListener)unsubscribeGameListener();const _0x393c72=doc(db,_0x598a28(0x23c)+appId+_0x598a28(0x1e8),_0x3d3cd1);unsubscribeGameListener=onSnapshot(_0x393c72,_0x5cd0b9=>{const _0x181c46=_0x598a28;if(!_0x5cd0b9['exists']()){toast(_0x181c46(0x25f));if(unsubscribeGameListener)unsubscribeGameListener();timerInterval&&(clearInterval(timerInterval),timerInterval=null);showView(_0x181c46(0x280)),document[_0x181c46(0x226)][_0x181c46(0x243)][_0x181c46(0x27c)]('player-view',_0x181c46(0x254));return;}const _0x4b1f79=_0x5cd0b9[_0x181c46(0x1c0)](),_0x3daad4=_0x4b1f79[_0x181c46(0x221)];if(!isHost&&previousGameStatus===_0x181c46(0x27e)&&_0x3daad4===_0x181c46(0x242)){if(unsubscribeGameListener)unsubscribeGameListener();if(timerInterval)clearInterval(timerInterval);currentGameId=null,currentPlayerName=null,toast('แอดมินได้สร้างห้องใหม่แล้ว'),showView(_0x181c46(0x280)),document[_0x181c46(0x226)][_0x181c46(0x243)]['remove']('player-view'),previousGameStatus=null;return;}previousGameStatus=_0x3daad4;if(_0x3daad4===_0x181c46(0x242))timerInterval&&(clearInterval(timerInterval),timerInterval=null),adminDisplayedPuzzleIndex=0x0,isHost?(showView(_0x181c46(0x22d)),renderLobbyPlayers(_0x4b1f79[_0x181c46(0x24b)])):showView(_0x181c46(0x24d));else{if(_0x3daad4==='playing'){if(_0x4b1f79[_0x181c46(0x206)]&&_0x4b1f79[_0x181c46(0x206)]['numQuestions']){const _0x1b9c48=_0x4b1f79[_0x181c46(0x24b)]||{},_0x3eb283=Object[_0x181c46(0x262)](_0x1b9c48)[_0x181c46(0x1ec)],_0x52d1e5=Object['values'](_0x1b9c48)[_0x181c46(0x268)](_0x145f4f=>_0x145f4f['currentPuzzle']>=_0x4b1f79[_0x181c46(0x206)][_0x181c46(0x237)])[_0x181c46(0x1ec)],_0x43e30a=_0x4b1f79[_0x181c46(0x206)][_0x181c46(0x1f8)]||_0x181c46(0x213);let _0x19350b=![];if(_0x43e30a===_0x181c46(0x213)&&_0x52d1e5>0x0)_0x19350b=!![];else _0x43e30a===_0x181c46(0x1b6)&&_0x3eb283>0x0&&_0x52d1e5===_0x3eb283&&(_0x19350b=!![]);if(_0x19350b){isHost&&forceEndGame();return;}}showView(_0x181c46(0x23f)),renderPlayingView(_0x4b1f79);}else _0x3daad4===_0x181c46(0x27e)&&(timerInterval&&(clearInterval(timerInterval),timerInterval=null),renderGameOverView(_0x4b1f79));}});}function renderLobbyPlayers(_0x3dcdf1){const _0x2f5e5a=_0x577120,_0x41e762=Object[_0x2f5e5a(0x262)](_0x3dcdf1||{}),_0x5bf0d9=_0x41e762['length'];$(_0x2f5e5a(0x1cc))[_0x2f5e5a(0x1c3)]=_0x5bf0d9,_0x5bf0d9===0x0?lobbyPlayerNameList[_0x2f5e5a(0x200)]=_0x2f5e5a(0x223):lobbyPlayerNameList[_0x2f5e5a(0x200)]=_0x41e762[_0x2f5e5a(0x20f)](_0x4e50f8=>_0x2f5e5a(0x1ca)+_0x4e50f8+'</div>')[_0x2f5e5a(0x244)]('');}function startOrUpdateTimer(_0x23e4b3){const _0xef6487=_0x577120;if(timerInterval)clearInterval(timerInterval);const _0xa02eb8=_0x23e4b3[_0xef6487(0x206)]||gameSettings;if(_0xa02eb8['timerMode']==='overall'){const _0x557961=_0x23e4b3[_0xef6487(0x27f)][_0xef6487(0x1d1)]();timerInterval=setInterval(()=>{const _0x576f74=_0xef6487,_0x420aba=Math['floor']((Date[_0x576f74(0x263)]()-_0x557961)/0x3e8),_0x599af4=_0xa02eb8[_0x576f74(0x261)]-_0x420aba;if(_0x599af4<=0x0){clearInterval(timerInterval),gameTimerEl['textContent']=_0x576f74(0x1f3);if(isHost)forceEndGame();}else{const _0x119688=String(Math[_0x576f74(0x27d)](_0x599af4/0x3c))[_0x576f74(0x269)](0x2,'0'),_0x18fd30=String(_0x599af4%0x3c)[_0x576f74(0x269)](0x2,'0');gameTimerEl[_0x576f74(0x1c3)]=_0x576f74(0x25b)+_0x119688+':'+_0x18fd30;}},0x1f4);}else{const _0x15fc37=isHost?Object[_0xef6487(0x1cb)](_0x23e4b3[_0xef6487(0x24b)])[_0xef6487(0x22a)]((_0x5d091,_0x398d31)=>(_0x398d31[_0xef6487(0x1fd)]||0x0)-(_0x5d091[_0xef6487(0x1fd)]||0x0))[0x0]:_0x23e4b3[_0xef6487(0x24b)][currentPlayerName];if(!_0x15fc37||!_0x15fc37['puzzleStartTime']){gameTimerEl['textContent']=_0xef6487(0x266)+_0xa02eb8[_0xef6487(0x261)];return;};const _0x28debc=_0x15fc37[_0xef6487(0x1d4)]['toMillis']();timerInterval=setInterval(async()=>{const _0x3a3cef=_0xef6487,_0x4c186f=Math[_0x3a3cef(0x27d)]((Date[_0x3a3cef(0x263)]()-_0x28debc)/0x3e8),_0x2058da=_0xa02eb8[_0x3a3cef(0x261)]-_0x4c186f;if(_0x2058da<=0x0){clearInterval(timerInterval),gameTimerEl[_0x3a3cef(0x1c3)]='หมดเวลา!';if(!isHost){toast(_0x3a3cef(0x1f9));const _0x270c64=_0x23e4b3[_0x3a3cef(0x24b)][currentPlayerName],_0x17ef12=_0x270c64[_0x3a3cef(0x1fd)]+0x1,_0x242b20={['players.'+currentPlayerName+_0x3a3cef(0x1e1)]:_0x17ef12};_0x17ef12<_0xa02eb8[_0x3a3cef(0x237)]?_0x242b20[_0x3a3cef(0x1e9)+currentPlayerName+_0x3a3cef(0x217)]=serverTimestamp():_0x242b20[_0x3a3cef(0x1e9)+currentPlayerName+_0x3a3cef(0x279)]=serverTimestamp(),await updateDoc(doc(db,_0x3a3cef(0x23c)+appId+_0x3a3cef(0x1e8),currentGameId),_0x242b20);}}else gameTimerEl[_0x3a3cef(0x1c3)]=_0x3a3cef(0x266)+String(_0x2058da)[_0x3a3cef(0x269)](0x2,'0');},0x1f4);}}function renderPlayingView(_0x11155c){const _0x10e73c=_0x577120;document[_0x10e73c(0x226)]['classList'][_0x10e73c(0x267)]('admin-view',isHost),document['body'][_0x10e73c(0x243)][_0x10e73c(0x267)](_0x10e73c(0x212),!isHost),startOrUpdateTimer(_0x11155c),isHost?renderAdminGameView(_0x11155c):renderPlayerGameView(_0x11155c);}function renderAdminGameView(_0x1c97b9){const _0x10c882=_0x577120;hostControls['classList'][_0x10c882(0x27c)](_0x10c882(0x25c)),toggleLeaderboardBtn[_0x10c882(0x243)][_0x10c882(0x27c)]('hidden');const _0x3eb555=_0x1c97b9[_0x10c882(0x24b)]||{},_0x3c7a88=Object['entries'](_0x3eb555)['sort']((_0xe004b9,_0x4d0fcb)=>(_0x4d0fcb[0x1]['score']||0x0)-(_0xe004b9[0x1]['score']||0x0));playerList[_0x10c882(0x200)]=_0x3c7a88['map'](([_0x52cd25,_0x4ea30e])=>_0x10c882(0x201)+_0x52cd25+_0x10c882(0x255)+(_0x4ea30e[_0x10c882(0x1d6)]||0x0)+_0x10c882(0x1cf)+(_0x4ea30e[_0x10c882(0x1fd)]>=_0x1c97b9['gameMode'][_0x10c882(0x237)]?'สำเร็จ':_0x10c882(0x26d)+(_0x4ea30e['currentPuzzle']+0x1))+_0x10c882(0x251))[_0x10c882(0x244)]('');const _0x458790=_0x1c97b9[_0x10c882(0x206)]?.[_0x10c882(0x1dd)]||_0x10c882(0x22c);let _0x408d55=0x0;if(_0x458790==='overall'){const _0x588fbc=Math['max'](0x0,...Object[_0x10c882(0x1cb)](_0x3eb555)[_0x10c882(0x20f)](_0x480b0d=>_0x480b0d[_0x10c882(0x1fd)]||0x0));_0x588fbc>adminDisplayedPuzzleIndex&&(adminDisplayedPuzzleIndex=_0x588fbc),_0x408d55=adminDisplayedPuzzleIndex;}else{const _0x363f3c=_0x3c7a88[0x0];_0x363f3c&&(_0x408d55=_0x363f3c[0x1][_0x10c882(0x1fd)]||0x0);}_0x408d55=Math[_0x10c882(0x215)](_0x408d55,_0x1c97b9[_0x10c882(0x206)][_0x10c882(0x237)]-0x1),puzzleProgressEl[_0x10c882(0x1c3)]=_0x10c882(0x26b)+(_0x408d55+0x1)+_0x10c882(0x1ba)+_0x1c97b9[_0x10c882(0x206)][_0x10c882(0x237)],puzzleProgressEl[_0x10c882(0x243)][_0x10c882(0x27c)]('hidden');const _0x342660=JSON[_0x10c882(0x230)](_0x1c97b9['puzzles']),_0x17e4d5=_0x342660[_0x408d55];gameBoard[_0x10c882(0x243)][_0x10c882(0x27c)](_0x10c882(0x25c)),playerFinishedView[_0x10c882(0x243)][_0x10c882(0x272)]('hidden'),grid['innerHTML']=_0x17e4d5[_0x10c882(0x20f)](_0x102b78=>_0x10c882(0x1f2)+_0x102b78+_0x10c882(0x1ed))['join'](''),$$('.op')['forEach'](_0x215bb5=>_0x215bb5[_0x10c882(0x243)]['add']('opacity-50',_0x10c882(0x241))),$('#reset-btn')[_0x10c882(0x243)]['add'](_0x10c882(0x25c)),$(_0x10c882(0x253))[_0x10c882(0x243)]['add'](_0x10c882(0x25c));}function renderPlayerGameView(_0x194b0b){const _0xc6740a=_0x577120,_0x14278f=_0x194b0b['players'][currentPlayerName];if(!_0x14278f)return;playerScoreDisplay[_0xc6740a(0x1c3)]=_0xc6740a(0x24c)+(_0x14278f[_0xc6740a(0x1d6)]||0x0),playerScoreDisplay['classList'][_0xc6740a(0x27c)](_0xc6740a(0x25c));const _0x2d3a5b=_0x194b0b[_0xc6740a(0x206)]?.[_0xc6740a(0x1f8)]||_0xc6740a(0x213);if(_0x14278f[_0xc6740a(0x1fd)]>=_0x194b0b[_0xc6740a(0x206)][_0xc6740a(0x237)])_0x2d3a5b==='wait'?(gameBoard[_0xc6740a(0x243)][_0xc6740a(0x272)](_0xc6740a(0x25c)),playerFinishedView['classList']['remove'](_0xc6740a(0x25c))):(gameBoard[_0xc6740a(0x243)][_0xc6740a(0x272)](_0xc6740a(0x25c)),playerFinishedView[_0xc6740a(0x243)][_0xc6740a(0x27c)]('hidden'),$(_0xc6740a(0x1b9))[_0xc6740a(0x1c3)]=_0xc6740a(0x222),$(_0xc6740a(0x208))[_0xc6740a(0x1c3)]=_0xc6740a(0x20a));else{gameBoard['classList']['remove']('hidden'),playerFinishedView[_0xc6740a(0x243)]['add'](_0xc6740a(0x25c)),puzzleProgressEl[_0xc6740a(0x1c3)]='ด่าน\x20'+(_0x14278f['currentPuzzle']+0x1)+'\x20/\x20'+_0x194b0b[_0xc6740a(0x206)][_0xc6740a(0x237)],puzzleProgressEl[_0xc6740a(0x243)]['remove']('hidden');const _0x58c206=JSON[_0xc6740a(0x230)](_0x194b0b['puzzles']),_0x3370e7=_0x58c206[_0x14278f['currentPuzzle']];JSON[_0xc6740a(0x23d)](currentPuzzleNumbers)!==JSON[_0xc6740a(0x23d)](_0x3370e7)&&(currentPuzzleNumbers=[..._0x3370e7],resetLocalBoard());}}function renderGameOverView(_0x535252){const _0x236f91=_0x577120,_0x14245d=_0x535252[_0x236f91(0x24b)]||{},_0x599441=Object[_0x236f91(0x1e2)](_0x14245d)[_0x236f91(0x22a)](([,_0xee6339],[,_0x386517])=>{const _0x4667ea=_0x236f91;if(_0xee6339[_0x4667ea(0x1d6)]!==_0x386517[_0x4667ea(0x1d6)])return(_0x386517[_0x4667ea(0x1d6)]||0x0)-(_0xee6339[_0x4667ea(0x1d6)]||0x0);if(_0x386517[_0x4667ea(0x1ea)]&&_0xee6339[_0x4667ea(0x1ea)])return _0xee6339[_0x4667ea(0x1ea)]['toMillis']()-_0x386517['finishTime']['toMillis']();if(_0x386517['finishTime'])return-0x1;if(_0xee6339[_0x4667ea(0x1ea)])return 0x1;return 0x0;});podiumContainer[_0x236f91(0x200)]='',otherRankingsList[_0x236f91(0x200)]='';const _0x46027f=_0x599441[_0x236f91(0x1b8)](0x0,0x3),_0x5a6426=_0x599441['slice'](0x3);_0x46027f['forEach'](([_0x1c8956,_0x443fed],_0x2b9104)=>{const _0x5571fe=_0x236f91,_0x1d8b51=_0x2b9104+0x1,_0xf82e2d=document['createElement'](_0x5571fe(0x26c));_0xf82e2d[_0x5571fe(0x249)]=_0x5571fe(0x21a)+_0x1d8b51,_0xf82e2d[_0x5571fe(0x200)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1d8b51===0x1?_0x5571fe(0x1d8):'')+_0x5571fe(0x219)+_0x1c8956+_0x5571fe(0x27b)+(_0x443fed[_0x5571fe(0x1d6)]||0x0)+'\x20คะแนน</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>'+_0x1d8b51+_0x5571fe(0x259),podiumContainer['appendChild'](_0xf82e2d);});for(let _0x5d421e=_0x599441[_0x236f91(0x1ec)];_0x5d421e<0x3;_0x5d421e++){const _0xdc3c47=_0x5d421e+0x1,_0x5c551a=document[_0x236f91(0x224)]('div');_0x5c551a['className']=_0x236f91(0x21a)+_0xdc3c47,podiumContainer[_0x236f91(0x1c9)](_0x5c551a);}_0x5a6426['length']>0x0?(otherRankingsContainer[_0x236f91(0x243)][_0x236f91(0x27c)]('hidden'),otherRankingsList['innerHTML']=_0x5a6426[_0x236f91(0x20f)](([_0x140384,_0x5d1fcb],_0xb057f8)=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+(_0xb057f8+0x4)+'.\x20'+_0x140384+_0x236f91(0x1fa)+(_0x5d1fcb['score']||0x0)+_0x236f91(0x210))['join']('')):otherRankingsContainer[_0x236f91(0x243)][_0x236f91(0x272)]('hidden'),isHost?$(_0x236f91(0x209))[_0x236f91(0x243)][_0x236f91(0x27c)](_0x236f91(0x25c)):$('#back-to-lobby-btn')[_0x236f91(0x243)][_0x236f91(0x272)](_0x236f91(0x25c)),showView(_0x236f91(0x236));}function renderLocalGrid(){const _0x5dfd41=_0x577120;grid[_0x5dfd41(0x200)]='';firstIndex!==null?grid[_0x5dfd41(0x243)][_0x5dfd41(0x272)]('number-selected'):grid['classList'][_0x5dfd41(0x27c)](_0x5dfd41(0x204));for(let _0x58f2c5=0x0;_0x58f2c5<0x4;_0x58f2c5++){const _0x27969a=localBoard[_0x58f2c5],_0x4190c7=document[_0x5dfd41(0x224)](_0x5dfd41(0x26c));_0x27969a===null?_0x4190c7[_0x5dfd41(0x249)]='slot\x20empty':(_0x4190c7[_0x5dfd41(0x249)]=_0x5dfd41(0x1de)+(_0x58f2c5===firstIndex?_0x5dfd41(0x20e):''),_0x4190c7[_0x5dfd41(0x200)]=fmt(_0x27969a),_0x4190c7['addEventListener'](_0x5dfd41(0x220),()=>handleTileClick(_0x58f2c5))),grid[_0x5dfd41(0x1c9)](_0x4190c7);}$$('.op')[_0x5dfd41(0x1f1)](_0x31b805=>_0x31b805[_0x5dfd41(0x243)][_0x5dfd41(0x267)](_0x5dfd41(0x21c),_0x31b805[_0x5dfd41(0x20d)]['op']===selectedOp));}function _0x10a5(_0x48db90,_0xf1ca7){const _0x43883c=_0x4388();return _0x10a5=function(_0x10a510,_0x58bf09){_0x10a510=_0x10a510-0x1b6;let _0x49d4b4=_0x43883c[_0x10a510];return _0x49d4b4;},_0x10a5(_0x48db90,_0xf1ca7);}function resetLocalBoard(){localBoard=currentPuzzleNumbers['map'](_0x22d123=>({'n':_0x22d123,'d':0x1})),firstIndex=null,selectedOp=null,renderLocalGrid();}function _0x4388(){const _0x3171b6=['overall','admin-lobby','#player-name-input','value','parse','#puzzle-progress','...','random','Error\x20advancing\x20puzzle:','หารด้วยศูนย์ไม่ได้','game-over','numQuestions','apiKey','getItem','ไม่สามารถเข้าร่วมได้\x20เกมเริ่มไปแล้ว','Error\x20returning\x20to\x20lobby:','artifacts/','stringify','.op','game','1703124mrRxeo','cursor-not-allowed','lobby','classList','join','Firebase\x20init\x20failed:','Error\x20joining\x20game:','get','#game-board','className','clamp(2.5rem,\x2010vw,\x204rem)','players','คะแนน:\x20','player-wait','#toggle-leaderboard-btn','fas\x20fa-eye','11549080FOsFfR',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','#start-practice-btn','#home-btn','admin-view','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-progress\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.score','querySelector','.main-game','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','data-theme','เวลา:\x20','hidden','exists','#open-settings-btn','ห้องเกมถูกปิดแล้ว','game24-default','timeLimit','keys','now','trim','currentUser','เวลาข้อนี้:\x20','toggle','filter','padStart','#other-rankings-list','แสดงผลด่าน\x20','div','ด่าน\x20','14667165YsAFIk','G-B1ZTE90SGG','#admin-lobby-view','16KHRFLR','add','#admin-back-btn','error','game24-69666.firebasestorage.app','กรุณากรอกข้อมูลให้ครบถ้วน','admin-settings','#player-finished-view','.finishTime','Authentication\x20failed:','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-score\x22>','remove','floor','finished','startTime','player-join','เกิดข้อผิดพลาดในการเริ่มเกม','playing','871619BgoPvn','wait','989271279576','slice','#player-finished-view\x20h2','\x20/\x20','abs','#admin-login-modal','185335lqBHOO','collapsed','#player-list','data','#reset-btn','speed','textContent','#game-view','#other-rankings-container','center','fas\x20fa-eye-slash','#time-limit-input','appendChild','<div\x20class=\x22lobby-player-tag\x22>','values','#lobby-player-count','justifyContent','#game-timer','\x20คะแนน\x20(','#player-join-view','toMillis','เข้าร่วมสำเร็จ!\x20รอสักครู่...',';\x22>','puzzleStartTime','contains','score','8899','<i\x20class=\x22fas\x20fa-crown\x22></i>','#admin-login-btn','fixed','contrast','style','timerMode','tile','addEventListener','max','.currentPuzzle','entries','Authenticated\x20user:','\x20แทน','undefined','Game\x20does\x20not\x20exist!','from','/public/data/games','players.','finishTime','message','length','</div>','ไม่พบห้องเกมนี้','#grid','Authentication\x20failed.\x20Please\x20refresh.','forEach','<div\x20class=\x22tile\x22>','เวลา:\x2000:00','#podium-container','querySelectorAll','Firebase\x20config\x20is\x20missing.\x20App\x20cannot\x20start.','.sidebar','leaderboardMode','หมดเวลาสำหรับข้อนี้!','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','#game-over-view','update','currentPuzzle','12kNbtYP','#admin-icon-btn','innerHTML','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','log','16pwBmub','number-selected','2506115dhfFMb','gameMode','scoringMode','#player-finished-view\x20p','#back-to-lobby-btn','รอผลการแข่งขันสักครู่...','game24-69666','#toast','dataset','\x20sel','map','\x20คะแนน</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','admin-login','player-view','immediate','3497961ZFnfvf','min','#themeSelect','.puzzleStartTime','</span>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','podium-stand\x20podium-','ลองอีกครั้ง!','sel','<span\x20style=\x22font-size:\x20','1:989271279576:web:43115bbaeeae31160954ad','uid','click','status','เสร็จสิ้น!','<p\x20class=\x22text-gray-500\x20text-center\x20w-full\x22>ยังไม่มีใครเข้าร่วม...</p>','createElement','กรุณาเลือกตัวเลขก่อน','body','input[name=\x22leaderboardMode\x22]:checked','#game-code-display','documentElement','sort','2rem'];_0x4388=function(){return _0x3171b6;};return _0x4388();}async function handleTileClick(_0x53919a){const _0x467938=_0x577120;if(localBoard[_0x53919a]===null)return;if(firstIndex===_0x53919a){firstIndex=null,renderLocalGrid();return;}if(firstIndex===null||selectedOp===null){firstIndex=_0x53919a,renderLocalGrid();return;}const _0x4e5f8d=localBoard[firstIndex],_0x24e9f5=localBoard[_0x53919a];let _0x3f7402,_0x3486e0,_0x46deba;if(selectedOp==='+')_0x3486e0=_0x4e5f8d['n']*_0x24e9f5['d']+_0x24e9f5['n']*_0x4e5f8d['d'],_0x46deba=_0x4e5f8d['d']*_0x24e9f5['d'];else{if(selectedOp==='-')_0x3486e0=_0x4e5f8d['n']*_0x24e9f5['d']-_0x24e9f5['n']*_0x4e5f8d['d'],_0x46deba=_0x4e5f8d['d']*_0x24e9f5['d'];else{if(selectedOp==='*')_0x3486e0=_0x4e5f8d['n']*_0x24e9f5['n'],_0x46deba=_0x4e5f8d['d']*_0x24e9f5['d'];else{if(selectedOp==='/'){if(_0x24e9f5['n']===0x0){toast(_0x467938(0x235));return;}_0x3486e0=_0x4e5f8d['n']*_0x24e9f5['d'],_0x46deba=_0x4e5f8d['d']*_0x24e9f5['n'];}}}}_0x46deba<0x0&&(_0x46deba=-_0x46deba,_0x3486e0=-_0x3486e0);const _0x3db854=gcd(Math['abs'](_0x3486e0),Math[_0x467938(0x1bb)](_0x46deba));_0x3f7402={'n':_0x3486e0/_0x3db854,'d':_0x46deba/_0x3db854},localBoard[_0x53919a]=_0x3f7402,localBoard[firstIndex]=null,firstIndex=_0x53919a,selectedOp=null,renderLocalGrid();const _0x2445d6=localBoard['filter'](_0x7a7ab2=>_0x7a7ab2!==null);if(_0x2445d6[_0x467938(0x1ec)]===0x1){const _0x4c7662=_0x2445d6[0x0];if(_0x4c7662['d']===0x1&&_0x4c7662['n']===0x18){if(isPracticeMode){toast('ถูกต้อง!\x20โจทย์ข้อต่อไป...'),setTimeout(()=>{currentPuzzleNumbers=randomSolvable(),resetLocalBoard();},0x4b0);return;}const _0x333fd4=doc(db,'artifacts/'+appId+_0x467938(0x1e8),currentGameId);try{await runTransaction(db,async _0x5c9050=>{const _0x154bec=_0x467938,_0x20decf=await _0x5c9050[_0x154bec(0x247)](_0x333fd4);if(!_0x20decf[_0x154bec(0x25d)]()||_0x20decf[_0x154bec(0x1c0)]()['status']!==_0x154bec(0x282))return;const _0x28de8=_0x20decf['data'](),_0x3af3a9=_0x28de8[_0x154bec(0x24b)][currentPlayerName],_0x922b33=_0x28de8['gameMode']||{'scoringMode':_0x154bec(0x1c2),'timerMode':_0x154bec(0x22c)};let _0x550bb4=0x0;if(_0x922b33[_0x154bec(0x207)]===_0x154bec(0x1da))_0x550bb4=0x64;else{if(_0x922b33[_0x154bec(0x1dd)]===_0x154bec(0x22c)){const _0x11ccfe=_0x28de8[_0x154bec(0x27f)][_0x154bec(0x1d1)](),_0x591c79=Math[_0x154bec(0x27d)]((Date[_0x154bec(0x263)]()-_0x11ccfe)/0x3e8);_0x550bb4=0x64+Math[_0x154bec(0x1e0)](0x0,_0x922b33[_0x154bec(0x261)]-_0x591c79);}else{const _0x3162f8=_0x3af3a9[_0x154bec(0x1d4)][_0x154bec(0x1d1)](),_0x356c0e=Math[_0x154bec(0x27d)]((Date['now']()-_0x3162f8)/0x3e8);_0x550bb4=0x64+Math[_0x154bec(0x1e0)](0x0,_0x922b33[_0x154bec(0x261)]-_0x356c0e);}}const _0x2c2c33=_0x3af3a9[_0x154bec(0x1fd)]+0x1,_0x58c48a={[_0x154bec(0x1e9)+currentPlayerName+'.currentPuzzle']:_0x2c2c33,['players.'+currentPlayerName+_0x154bec(0x256)]:increment(_0x550bb4)};_0x2c2c33<_0x922b33[_0x154bec(0x237)]?_0x58c48a[_0x154bec(0x1e9)+currentPlayerName+_0x154bec(0x217)]=serverTimestamp():_0x58c48a[_0x154bec(0x1e9)+currentPlayerName+_0x154bec(0x279)]=serverTimestamp(),_0x5c9050[_0x154bec(0x1fc)](_0x333fd4,_0x58c48a);});}catch(_0x55d91a){console[_0x467938(0x274)](_0x467938(0x234),_0x55d91a);}}else toast(_0x467938(0x21b)),setTimeout(()=>{resetLocalBoard();},0x5dc);}}$(_0x577120(0x1ff))[_0x577120(0x1df)](_0x577120(0x220),()=>showView(_0x577120(0x211))),$(_0x577120(0x273))[_0x577120(0x1df)](_0x577120(0x220),()=>showView('player-join')),$(_0x577120(0x1d9))[_0x577120(0x1df)](_0x577120(0x220),async()=>{const _0x2743e1=_0x577120;$('#admin-password-input')[_0x2743e1(0x22f)]===_0x2743e1(0x1d7)?(isHost=!![],await createGameRoom()):toast('รหัสผ่านไม่ถูกต้อง');}),$('#join-game-btn')['addEventListener'](_0x577120(0x220),handleJoinGame),$(_0x577120(0x252))[_0x577120(0x1df)]('click',startPracticeMode),$(_0x577120(0x25e))[_0x577120(0x1df)](_0x577120(0x220),()=>{const _0x105a5c=_0x577120;adminSettingsModal[_0x105a5c(0x243)][_0x105a5c(0x27c)](_0x105a5c(0x25c));}),$('#cancel-settings-btn')[_0x577120(0x1df)](_0x577120(0x220),()=>{const _0x74a8c9=_0x577120;adminSettingsModal[_0x74a8c9(0x243)][_0x74a8c9(0x272)](_0x74a8c9(0x25c));}),$('#start-game-btn')[_0x577120(0x1df)](_0x577120(0x220),handleStartGame),$('#end-game-btn')['addEventListener'](_0x577120(0x220),forceEndGame),$('#back-to-lobby-btn')['addEventListener'](_0x577120(0x220),returnToLobby),$(_0x577120(0x253))[_0x577120(0x1df)](_0x577120(0x220),()=>{isPracticeMode=![];if(unsubscribeGameListener)unsubscribeGameListener();if(timerInterval)clearInterval(timerInterval);currentGameId=null,currentPlayerName=null,showView('player-join');}),$(_0x577120(0x1c1))[_0x577120(0x1df)](_0x577120(0x220),resetLocalBoard),$$(_0x577120(0x23e))[_0x577120(0x1f1)](_0x4e4c3e=>_0x4e4c3e['addEventListener'](_0x577120(0x220),()=>{const _0x2562df=_0x577120,_0x25e92e=_0x4e4c3e[_0x2562df(0x20d)]['op'];if(selectedOp===_0x25e92e)selectedOp=null;else{if(firstIndex===null){toast(_0x2562df(0x225));return;}selectedOp=_0x25e92e;}renderLocalGrid();})),toggleLeaderboardBtn[_0x577120(0x1df)](_0x577120(0x220),()=>{const _0x22b186=_0x577120,_0x75cac6=document[_0x22b186(0x257)]('.leaderboard');_0x75cac6[_0x22b186(0x243)]['toggle']('collapsed');const _0x3ba359=toggleLeaderboardBtn[_0x22b186(0x257)]('i');_0x75cac6['classList'][_0x22b186(0x1d5)](_0x22b186(0x1be))?_0x3ba359[_0x22b186(0x249)]=_0x22b186(0x24f):_0x3ba359[_0x22b186(0x249)]=_0x22b186(0x1c7);}),window[_0x577120(0x1df)]('beforeunload',()=>{const _0x4708a4=_0x577120;if(isHost&&currentGameId){const _0x57cd7f=doc(db,_0x4708a4(0x23c)+appId+_0x4708a4(0x1e8),currentGameId);deleteDoc(_0x57cd7f);}}),initialize(),showView(_0x577120(0x280));
