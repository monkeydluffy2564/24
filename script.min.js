const _0x1ed244=_0x7d07;(function(_0x40774f,_0x1ae3e6){const _0x5e184a=_0x7d07,_0x561e6c=_0x40774f();while(!![]){try{const _0x45f576=parseInt(_0x5e184a(0x171))/0x1*(-parseInt(_0x5e184a(0xc3))/0x2)+parseInt(_0x5e184a(0xf4))/0x3*(-parseInt(_0x5e184a(0x149))/0x4)+-parseInt(_0x5e184a(0xc9))/0x5*(parseInt(_0x5e184a(0x18d))/0x6)+-parseInt(_0x5e184a(0x188))/0x7*(parseInt(_0x5e184a(0xce))/0x8)+parseInt(_0x5e184a(0xe6))/0x9+parseInt(_0x5e184a(0x101))/0xa+parseInt(_0x5e184a(0xd2))/0xb*(parseInt(_0x5e184a(0xfd))/0xc);if(_0x45f576===_0x1ae3e6)break;else _0x561e6c['push'](_0x561e6c['shift']());}catch(_0x1c2b38){_0x561e6c['push'](_0x561e6c['shift']());}}}(_0x5833,0xcf233));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';import{getAuth,signInAnonymously,signInWithCustomToken,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,onSnapshot,serverTimestamp,runTransaction,deleteDoc,Timestamp,deleteField,increment}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';const defaultFirebaseConfig={'apiKey':_0x1ed244(0xc5),'authDomain':_0x1ed244(0xc8),'projectId':_0x1ed244(0x19a),'storageBucket':'game24-69666.firebasestorage.app','messagingSenderId':_0x1ed244(0x139),'appId':_0x1ed244(0xdf),'measurementId':'G-B1ZTE90SGG'},appId=typeof __app_id!==_0x1ed244(0x131)?__app_id:_0x1ed244(0x16b),firebaseConfig=typeof __firebase_config!==_0x1ed244(0x131)?JSON[_0x1ed244(0x13b)](__firebase_config):defaultFirebaseConfig,$=_0x31467a=>document[_0x1ed244(0x140)](_0x31467a),$$=_0x53cde0=>Array[_0x1ed244(0x180)](document[_0x1ed244(0x107)](_0x53cde0)),playerJoinView=$(_0x1ed244(0x127)),playerWaitView=$(_0x1ed244(0x130)),adminLobbyView=$('#admin-lobby-view'),gameView=$('#game-view'),adminLoginModal=$('#admin-login-modal'),adminSettingsModal=$(_0x1ed244(0x155)),gameOverView=$(_0x1ed244(0x115)),grid=$(_0x1ed244(0x163)),playerList=$(_0x1ed244(0x145)),lobbyPlayerNameList=$(_0x1ed244(0x10c)),lobbyPlayerCount=$(_0x1ed244(0x12d)),hostControls=$(_0x1ed244(0x15a)),toastEl=$('#toast'),gameCodeDisplay=$(_0x1ed244(0x129)),gameTimerEl=$('#game-timer'),puzzleProgressEl=$(_0x1ed244(0x103)),playerScoreDisplay=$(_0x1ed244(0x183)),gameBoard=$(_0x1ed244(0x195)),playerFinishedView=$(_0x1ed244(0x185)),podiumContainer=$(_0x1ed244(0x14a)),otherRankingsList=$(_0x1ed244(0x193)),otherRankingsContainer=$(_0x1ed244(0x19c)),toggleLeaderboardBtn=$(_0x1ed244(0xcd)),numQuestionsInput=$(_0x1ed244(0xef)),stageModeUnlimitedRadio=$(_0x1ed244(0x144)),stageModeLimitedRadio=$(_0x1ed244(0x18f)),unlimitedStageContainer=$(_0x1ed244(0x109));let db,auth,userId,currentPlayerName,isHost=![],currentGameId=null,isPracticeMode=![],unsubscribeGameListener=null,timerInterval=null,localBoard=[null,null,null,null],currentPuzzleNumbers=[],firstIndex=null,selectedOp=null,adminDisplayedPuzzleIndex=0x0,previousGameStatus=null,gameSettings={'numQuestions':0x5,'timeLimit':0xb4,'timerMode':'overall','scoringMode':_0x1ed244(0x190),'leaderboardMode':'immediate'};function toast(_0x2fa50c,_0x43bf01=0x7d0){const _0x533d8a=_0x1ed244;toastEl[_0x533d8a(0xe9)]=_0x2fa50c,toastEl[_0x533d8a(0x198)][_0x533d8a(0xea)](_0x533d8a(0xfb)),setTimeout(()=>toastEl['classList'][_0x533d8a(0x14f)](_0x533d8a(0xfb)),_0x43bf01);}function _0x7d07(_0x1c6378,_0x3fc4cb){const _0x5833d9=_0x5833();return _0x7d07=function(_0x7d0704,_0x164349){_0x7d0704=_0x7d0704-0xbc;let _0x32cc9d=_0x5833d9[_0x7d0704];return _0x32cc9d;},_0x7d07(_0x1c6378,_0x3fc4cb);}const rnd=(_0x1b043d,_0x3cf967)=>Math[_0x1ed244(0x17a)](Math[_0x1ed244(0xc1)]()*(_0x3cf967-_0x1b043d+0x1))+_0x1b043d;function gcd(_0x3fba7f,_0x17f648){return _0x17f648===0x0?_0x3fba7f:gcd(_0x17f648,_0x3fba7f%_0x17f648);}function _0x5833(){const _0x353d8d=['...','<div\x20class=\x22tile\x22>','input[name=\x22leaderboardMode\x22]:checked','\x20คะแนน\x20(','เข้าร่วมสำเร็จ!\x20รอสักครู่...','floor','sel','leaderboardMode','abs','#player-finished-view\x20h2','error','from','padStart','uid','#player-score-display','#game-timer','#player-finished-view','beforeunload','.currentPuzzle','665441YKjIQx','#cancel-settings-btn','รอผลการแข่งขันสักครู่...','แอดมินได้สร้างห้องใหม่แล้ว','</div>','3436746mhGNyr','แสดงผลด่าน\x20','#stage-mode-limited','speed','admin-lobby','artifacts/','#other-rankings-list','scoringMode','#game-board','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-progress\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','เวลา:\x2000:00','classList','currentPuzzle','game24-69666','body','#other-rankings-container','การเชื่อมต่อล้มเหลว','exists','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','min','input[name=\x22stageMode\x22]','random','ลองอีกครั้ง!','2GwmHJo','toMillis','AIzaSyAJsk4l8I8uCYpJY8jZLAlRW1w2qLWN-2o','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-score\x22>','#player-name-input','game24-69666.firebaseapp.com','5huzlyb','finishTime','รหัสผ่านไม่ถูกต้อง','\x20คะแนน</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>','#toggle-leaderboard-btn','128hgxyxE','#player-finished-view\x20p','contains','#start-game-btn','2436445NiqVnA','Error\x20joining\x20game:','fas\x20fa-eye-slash','<span\x20style=\x22font-size:\x20','<p\x20class=\x22text-gray-500\x20text-center\x20w-full\x22>ยังไม่มีใครเข้าร่วม...</p>','status','.score','.op','center','puzzleStartTime','.sidebar','g24_theme_mp','trim','1:989271279576:web:43115bbaeeae31160954ad','หารด้วยศูนย์ไม่ได้','.puzzleStartTime','Authentication\x20failed.\x20Please\x20refresh.','game-over','startTime','length','3884112Qpjiqw','input[name=\x22leaderboardMode\x22]','ไม่พบห้องเกมนี้','textContent','add','.main-game','numQuestions','podium-stand\x20podium-','map','#num-questions-input','setAttribute','\x20แทน',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','log','21GyPgwZ','max','data-theme','forEach','values','กรุณาเลือกตัวเลขก่อน','cursor-not-allowed','show','players','156EILXdN','slot\x20empty','Authenticated\x20user:','wait','15878320cdLQum','toString','#puzzle-progress','immediate','focus','player-wait','querySelectorAll','sort','#unlimited-stage-container','#end-game-btn','admin-login','#lobby-player-name-list','player-join','ถูกต้อง!\x20โจทย์ข้อต่อไป...','#start-practice-btn','player-view','addEventListener','keys','update','#admin-login-btn','#game-over-view','gameMode','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','game','hidden','เสร็จสิ้น!','justifyContent','value',';\x22>','checked','stringify','</span>','message','.finishTime','เวลา:\x20','Error\x20returning\x20to\x20lobby:','getItem','documentElement','#player-join-view','score','#game-code-display','timeLimit','.leaderboard','data','#lobby-player-count','เกิดข้อผิดพลาดในการเริ่มเกม','#reset-btn','#player-wait-view','undefined','/public/data/games','#time-limit-input','tile','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','ด่าน\x20','#home-btn','entries','989271279576','now','parse','Error\x20advancing\x20puzzle:','admin-view','players.','label','querySelector','contrast','หมดเวลา!','#back-to-lobby-btn','#stage-mode-unlimited','#player-list','Game\x20does\x20not\x20exist!','filter','dataset','311652caMASw','#podium-container','click','#themeSelect','createElement','timerMode','remove','disabled','style','join','opacity-50','Firebase\x20init\x20failed:','#admin-settings-modal','slice','#join-game-btn','innerHTML','\x20sel','#host-controls','เวลาข้อนี้:\x20','คะแนน:\x20','lobby','number-selected','<div\x20class=\x22lobby-player-tag\x22>','\x20คะแนน</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','get','ห้องเกมถูกปิดแล้ว','#grid','overall','change','finished','Authentication\x20failed:','toggle','playing','div','game24-default','puzzles','className','กรุณากรอกข้อมูลให้ครบถ้วน','#admin-back-btn','collapsed','1411210GvyHlq','Error\x20starting\x20game:','\x20/\x20','#admin-icon-btn'];_0x5833=function(){return _0x353d8d;};return _0x5833();}const fmt=_0x76540f=>{const _0x27f74d=_0x1ed244;if(_0x76540f['d']===0x1)return String(_0x76540f['n']);const _0x1b0c48=String(_0x76540f['n'])[_0x27f74d(0xe5)]>0x2||String(_0x76540f['d'])['length']>0x2?'2rem':'clamp(2.5rem,\x2010vw,\x204rem)';return _0x27f74d(0xd5)+_0x1b0c48+_0x27f74d(0x11d)+_0x76540f['n']+'/'+_0x76540f['d']+_0x27f74d(0x120);},themeKey=_0x1ed244(0xdd),themeSelect=$(_0x1ed244(0x14c));function applyTheme(_0x3a2145){const _0x41d305=_0x1ed244;document[_0x41d305(0x126)][_0x41d305(0xf0)](_0x41d305(0xf6),_0x3a2145),localStorage['setItem'](themeKey,_0x3a2145);}const savedTheme=localStorage[_0x1ed244(0x125)](themeKey),initialTheme=savedTheme||_0x1ed244(0x141);applyTheme(initialTheme);themeSelect&&(themeSelect[_0x1ed244(0x11c)]=initialTheme,themeSelect[_0x1ed244(0x111)](_0x1ed244(0x165),()=>applyTheme(themeSelect[_0x1ed244(0x11c)])));function solve24(_0x2b7757){function _0x113e4d(_0x259b5e){const _0xb84e21=_0x7d07;if(_0x259b5e[_0xb84e21(0xe5)]===0x1)return Math[_0xb84e21(0x17d)](_0x259b5e[0x0]-0x18)<0.000001;for(let _0x361d32=0x0;_0x361d32<_0x259b5e['length'];_0x361d32++){for(let _0x1d3137=0x0;_0x1d3137<_0x259b5e['length'];_0x1d3137++){if(_0x361d32===_0x1d3137)continue;const _0x44a18f=_0x259b5e[_0x361d32],_0x108910=_0x259b5e[_0x1d3137],_0x29a198=_0x259b5e[_0xb84e21(0x147)]((_0x54462d,_0x349f2c)=>_0x349f2c!==_0x361d32&&_0x349f2c!==_0x1d3137);if(_0x113e4d([_0x44a18f+_0x108910,..._0x29a198])||_0x113e4d([_0x44a18f-_0x108910,..._0x29a198])||_0x113e4d([_0x44a18f*_0x108910,..._0x29a198])||_0x108910!==0x0&&_0x113e4d([_0x44a18f/_0x108910,..._0x29a198]))return!![];}}return![];}return _0x113e4d(_0x2b7757);}function randomSolvable(){for(let _0x265fd2=0x0;_0x265fd2<0x1f4;_0x265fd2++){const _0x5ef523=[rnd(0x1,0x9),rnd(0x1,0x9),rnd(0x1,0x9),rnd(0x1,0x9)];if(solve24(_0x5ef523))return _0x5ef523;}return[0x1,0x2,0x3,0x4];}function showView(_0x2bbc7b){const _0x5df75a=_0x1ed244;[playerJoinView,playerWaitView,adminLoginModal,adminLobbyView,adminSettingsModal,gameView,gameOverView][_0x5df75a(0xf7)](_0x434491=>_0x434491[_0x5df75a(0x198)]['add'](_0x5df75a(0x119)));const _0x14e43b=$(_0x5df75a(0x174));if(_0x2bbc7b==='player-join'||_0x2bbc7b===_0x5df75a(0x10b))_0x14e43b[_0x5df75a(0x198)][_0x5df75a(0x14f)]('hidden');else isHost?_0x14e43b[_0x5df75a(0x198)][_0x5df75a(0x14f)](_0x5df75a(0x119)):_0x14e43b[_0x5df75a(0x198)][_0x5df75a(0xea)](_0x5df75a(0x119));if(_0x2bbc7b===_0x5df75a(0x10d))playerJoinView['classList'][_0x5df75a(0x14f)](_0x5df75a(0x119));else{if(_0x2bbc7b===_0x5df75a(0x106))playerWaitView['classList'][_0x5df75a(0x14f)](_0x5df75a(0x119));else{if(_0x2bbc7b==='admin-login')adminLoginModal[_0x5df75a(0x198)][_0x5df75a(0x14f)](_0x5df75a(0x119));else{if(_0x2bbc7b===_0x5df75a(0x191))adminLobbyView[_0x5df75a(0x198)]['remove'](_0x5df75a(0x119));else{if(_0x2bbc7b==='admin-settings')adminSettingsModal['classList'][_0x5df75a(0x14f)]('hidden');else{if(_0x2bbc7b===_0x5df75a(0x118))gameView[_0x5df75a(0x198)][_0x5df75a(0x14f)]('hidden'),isPracticeMode?($('.sidebar')[_0x5df75a(0x198)][_0x5df75a(0xea)]('hidden'),document[_0x5df75a(0x19b)][_0x5df75a(0x198)]['add'](_0x5df75a(0x110)),document[_0x5df75a(0x19b)][_0x5df75a(0x198)]['remove'](_0x5df75a(0x13d)),$(_0x5df75a(0x183))[_0x5df75a(0x198)]['add']('hidden'),$(_0x5df75a(0x103))['classList'][_0x5df75a(0xea)](_0x5df75a(0x119)),$(_0x5df75a(0x184))['textContent']='โหมดฝึกซ้อม',$('.main-game')[_0x5df75a(0x151)][_0x5df75a(0x11b)]=_0x5df75a(0xda)):($(_0x5df75a(0xdc))[_0x5df75a(0x198)][_0x5df75a(0x14f)](_0x5df75a(0x119)),$(_0x5df75a(0xeb))[_0x5df75a(0x151)]['justifyContent']='');else{if(_0x2bbc7b===_0x5df75a(0xe3))gameOverView['classList'][_0x5df75a(0x14f)](_0x5df75a(0x119));}}}}}}}async function initialize(){const _0x2215c9=_0x1ed244;try{if(!firebaseConfig['apiKey']){toast('Firebase\x20configuration\x20is\x20missing.'),console['error']('Firebase\x20config\x20is\x20missing.\x20App\x20cannot\x20start.');return;}const _0x10efe4=initializeApp(firebaseConfig);db=getFirestore(_0x10efe4),auth=getAuth(_0x10efe4),onAuthStateChanged(auth,async _0x12c716=>{const _0x529ea1=_0x7d07;if(_0x12c716)userId=_0x12c716[_0x529ea1(0x182)],console[_0x529ea1(0xf3)](_0x529ea1(0xff),userId);else try{typeof __initial_auth_token!==_0x529ea1(0x131)&&__initial_auth_token?await signInWithCustomToken(auth,__initial_auth_token):await signInAnonymously(auth);}catch(_0x22f24c){console['error'](_0x529ea1(0x167),_0x22f24c),toast(_0x529ea1(0xe2));}});}catch(_0x2e7207){console[_0x2215c9(0x17f)](_0x2215c9(0x154),_0x2e7207),toast(_0x2215c9(0xbc));}}async function createGameRoom(){const _0x2d9510=_0x1ed244;showView('admin-lobby'),gameCodeDisplay[_0x2d9510(0xe9)]=_0x2d9510(0x175);const _0xd12ba2=rnd(0xa,0x63)[_0x2d9510(0x102)]();currentGameId=_0xd12ba2;const _0x2b6eb8={'hostId':auth['currentUser'][_0x2d9510(0x182)],'status':_0x2d9510(0x15d),'players':{},'createdAt':serverTimestamp()},_0x250227=doc(db,_0x2d9510(0x192)+appId+'/public/data/games',currentGameId);await setDoc(_0x250227,_0x2b6eb8),gameCodeDisplay['textContent']=currentGameId,listenForGameUpdates(currentGameId);}async function handleStartGame(){const _0x537bb2=_0x1ed244;if(!isHost||!currentGameId)return;const _0x228271=parseInt($(_0x537bb2(0x133))[_0x537bb2(0x11c)],0xa)||0xb4,_0x4356c1=document['querySelector'](_0x537bb2(0x177))['value'],_0x14b512=document[_0x537bb2(0x140)]('input[name=\x22stageMode\x22]:checked')[_0x537bb2(0x11c)];let _0x37d14c;_0x14b512==='unlimited'?_0x37d14c=0x3e7:_0x37d14c=parseInt(numQuestionsInput[_0x537bb2(0x11c)],0xa)||0x5;gameSettings[_0x537bb2(0x12a)]=_0x228271,gameSettings[_0x537bb2(0x17c)]=_0x4356c1,gameSettings[_0x537bb2(0xec)]=_0x37d14c,adminSettingsModal[_0x537bb2(0x198)]['add'](_0x537bb2(0x119));const _0x258792=doc(db,'artifacts/'+appId+'/public/data/games',currentGameId);try{await runTransaction(db,async _0x482857=>{const _0x2f00f3=_0x537bb2,_0x199a62=await _0x482857[_0x2f00f3(0x161)](_0x258792);if(!_0x199a62['exists']())throw _0x2f00f3(0x146);const _0x2100fd=_0x199a62[_0x2f00f3(0x12c)]()[_0x2f00f3(0xfc)],_0x4aeffa=Array['from']({'length':gameSettings[_0x2f00f3(0xec)]},()=>randomSolvable()),_0x4805e2={'status':_0x2f00f3(0x169),'puzzles':JSON[_0x2f00f3(0x11f)](_0x4aeffa),'startTime':serverTimestamp(),'gameMode':gameSettings};for(const _0x2f8760 in _0x2100fd){_0x4805e2[_0x2f00f3(0x13e)+_0x2f8760+_0x2f00f3(0x187)]=0x0,_0x4805e2[_0x2f00f3(0x13e)+_0x2f8760+_0x2f00f3(0xd8)]=0x0,_0x4805e2[_0x2f00f3(0x13e)+_0x2f8760+_0x2f00f3(0x122)]=null,_0x4805e2[_0x2f00f3(0x13e)+_0x2f8760+'.puzzleStartTime']=serverTimestamp();}_0x482857[_0x2f00f3(0x113)](_0x258792,_0x4805e2);}),showView(_0x537bb2(0x118));}catch(_0x5514a3){console[_0x537bb2(0x17f)](_0x537bb2(0x172),_0x5514a3),toast(_0x537bb2(0x12e));}}async function forceEndGame(){const _0x23c4aa=_0x1ed244;if(!isHost||!currentGameId)return;const _0x9b0fcb=doc(db,_0x23c4aa(0x192)+appId+_0x23c4aa(0x132),currentGameId),_0xee257d=await getDoc(_0x9b0fcb);_0xee257d[_0x23c4aa(0xbd)]()&&_0xee257d[_0x23c4aa(0x12c)]()[_0x23c4aa(0xd7)]===_0x23c4aa(0x169)&&await updateDoc(_0x9b0fcb,{'status':_0x23c4aa(0x166)});}async function returnToLobby(){const _0x29c93d=_0x1ed244;if(!isHost||!currentGameId)return;const _0x1d747=doc(db,'artifacts/'+appId+_0x29c93d(0x132),currentGameId);try{await updateDoc(_0x1d747,{'status':'lobby','players':{},'puzzles':deleteField(),'startTime':deleteField(),'gameMode':deleteField()}),showView(_0x29c93d(0x191));}catch(_0x36ede1){console[_0x29c93d(0x17f)](_0x29c93d(0x124),_0x36ede1),toast('เกิดข้อผิดพลาดในการกลับสู่ล็อบบี้');}}async function handleJoinGame(){const _0x176829=_0x1ed244,_0x47781b=$('#game-code-input')['value'],_0x3003ef=$(_0x176829(0xc7))[_0x176829(0x11c)][_0x176829(0xde)]();if(!_0x47781b||!_0x3003ef)return toast(_0x176829(0x16e));currentGameId=_0x47781b,currentPlayerName=_0x3003ef;const _0x48f7fe=doc(db,_0x176829(0x192)+appId+_0x176829(0x132),currentGameId);try{await runTransaction(db,async _0x25fc74=>{const _0x262e7d=_0x176829,_0x435011=await _0x25fc74['get'](_0x48f7fe);if(!_0x435011[_0x262e7d(0xbd)]())throw new Error(_0x262e7d(0xe8));const _0xb5ad5a=_0x435011['data']();if(_0xb5ad5a[_0x262e7d(0xd7)]!==_0x262e7d(0x15d))throw new Error('ไม่สามารถเข้าร่วมได้\x20เกมเริ่มไปแล้ว');let _0x51ff9d=_0x3003ef;_0xb5ad5a[_0x262e7d(0xfc)][_0x51ff9d]&&(_0x51ff9d=''+_0x3003ef+rnd(0xa,0x63),toast('ชื่อซ้ำ,\x20เปลี่ยนเป็น\x20'+_0x51ff9d+_0x262e7d(0xf1))),currentPlayerName=_0x51ff9d,_0x25fc74[_0x262e7d(0x113)](_0x48f7fe,{[_0x262e7d(0x13e)+_0x51ff9d]:{'joined':!![]}});}),toast(_0x176829(0x179)),listenForGameUpdates(currentGameId);}catch(_0x35720a){console[_0x176829(0x17f)](_0x176829(0xd3),_0x35720a),toast(_0x35720a[_0x176829(0x121)]);}}function startPracticeMode(){const _0x3b3a47=_0x1ed244;isPracticeMode=!![],isHost=![],currentPuzzleNumbers=randomSolvable(),resetLocalBoard(),showView(_0x3b3a47(0x118));}function listenForGameUpdates(_0x3c7431){const _0x326485=_0x1ed244;if(unsubscribeGameListener)unsubscribeGameListener();const _0x5ed4bb=doc(db,_0x326485(0x192)+appId+'/public/data/games',_0x3c7431);unsubscribeGameListener=onSnapshot(_0x5ed4bb,_0x2ea40d=>{const _0xe4215=_0x326485;if(!_0x2ea40d[_0xe4215(0xbd)]()){toast(_0xe4215(0x162));if(unsubscribeGameListener)unsubscribeGameListener();timerInterval&&(clearInterval(timerInterval),timerInterval=null);showView('player-join'),document[_0xe4215(0x19b)][_0xe4215(0x198)][_0xe4215(0x14f)](_0xe4215(0x110),_0xe4215(0x13d));return;}const _0xb2dd38=_0x2ea40d[_0xe4215(0x12c)](),_0x5a8f3a=_0xb2dd38[_0xe4215(0xd7)];if(!isHost&&previousGameStatus===_0xe4215(0x166)&&_0x5a8f3a===_0xe4215(0x15d)){if(unsubscribeGameListener)unsubscribeGameListener();if(timerInterval)clearInterval(timerInterval);currentGameId=null,currentPlayerName=null,toast(_0xe4215(0x18b)),showView(_0xe4215(0x10d)),document['body'][_0xe4215(0x198)][_0xe4215(0x14f)](_0xe4215(0x110)),previousGameStatus=null;return;}previousGameStatus=_0x5a8f3a;if(_0x5a8f3a===_0xe4215(0x15d))timerInterval&&(clearInterval(timerInterval),timerInterval=null),adminDisplayedPuzzleIndex=0x0,isHost?(showView(_0xe4215(0x191)),renderLobbyPlayers(_0xb2dd38['players'])):showView(_0xe4215(0x106));else{if(_0x5a8f3a===_0xe4215(0x169)){if(_0xb2dd38[_0xe4215(0x116)]&&_0xb2dd38[_0xe4215(0x116)][_0xe4215(0xec)]){const _0x5e4f25=_0xb2dd38[_0xe4215(0xfc)]||{},_0x105ab0=Object[_0xe4215(0x112)](_0x5e4f25)[_0xe4215(0xe5)],_0x4ae34e=Object[_0xe4215(0xf8)](_0x5e4f25)[_0xe4215(0x147)](_0x535209=>_0x535209[_0xe4215(0x199)]>=_0xb2dd38[_0xe4215(0x116)]['numQuestions'])['length'],_0x69e9f1=_0xb2dd38[_0xe4215(0x116)][_0xe4215(0x17c)]||_0xe4215(0x104);let _0x48dbf1=![];if(_0x69e9f1===_0xe4215(0x104)&&_0x4ae34e>0x0)_0x48dbf1=!![];else _0x69e9f1===_0xe4215(0x100)&&_0x105ab0>0x0&&_0x4ae34e===_0x105ab0&&(_0x48dbf1=!![]);if(_0x48dbf1){isHost&&forceEndGame();return;}}showView(_0xe4215(0x118)),renderPlayingView(_0xb2dd38);}else _0x5a8f3a==='finished'&&(timerInterval&&(clearInterval(timerInterval),timerInterval=null),renderGameOverView(_0xb2dd38));}});}function renderLobbyPlayers(_0x45b150){const _0x1ba021=_0x1ed244,_0x17cf81=Object[_0x1ba021(0x112)](_0x45b150||{}),_0x54a3fe=_0x17cf81['length'];$(_0x1ba021(0x12d))[_0x1ba021(0xe9)]=_0x54a3fe,_0x54a3fe===0x0?lobbyPlayerNameList[_0x1ba021(0x158)]=_0x1ba021(0xd6):lobbyPlayerNameList[_0x1ba021(0x158)]=_0x17cf81[_0x1ba021(0xee)](_0x3a4a81=>_0x1ba021(0x15f)+_0x3a4a81+_0x1ba021(0x18c))['join']('');}function startOrUpdateTimer(_0x555171){const _0x5a1911=_0x1ed244;if(timerInterval)clearInterval(timerInterval);const _0x5b69d4=_0x555171[_0x5a1911(0x116)]||gameSettings;if(_0x5b69d4[_0x5a1911(0x14e)]===_0x5a1911(0x164)){const _0x180484=_0x555171[_0x5a1911(0xe4)][_0x5a1911(0xc4)]();timerInterval=setInterval(()=>{const _0x3d4e2e=_0x5a1911,_0x178c35=Math[_0x3d4e2e(0x17a)]((Date[_0x3d4e2e(0x13a)]()-_0x180484)/0x3e8),_0x1d4211=_0x5b69d4[_0x3d4e2e(0x12a)]-_0x178c35;if(_0x1d4211<=0x0){clearInterval(timerInterval),gameTimerEl[_0x3d4e2e(0xe9)]=_0x3d4e2e(0x197);if(isHost)forceEndGame();}else{const _0x4605ec=String(Math[_0x3d4e2e(0x17a)](_0x1d4211/0x3c))['padStart'](0x2,'0'),_0xae0329=String(_0x1d4211%0x3c)[_0x3d4e2e(0x181)](0x2,'0');gameTimerEl['textContent']=_0x3d4e2e(0x123)+_0x4605ec+':'+_0xae0329;}},0x1f4);}else{const _0x4510d0=isHost?Object[_0x5a1911(0xf8)](_0x555171['players'])[_0x5a1911(0x108)]((_0x2778aa,_0x5dab6d)=>(_0x5dab6d[_0x5a1911(0x199)]||0x0)-(_0x2778aa[_0x5a1911(0x199)]||0x0))[0x0]:_0x555171[_0x5a1911(0xfc)][currentPlayerName];if(!_0x4510d0||!_0x4510d0['puzzleStartTime']){gameTimerEl[_0x5a1911(0xe9)]=_0x5a1911(0x15b)+_0x5b69d4['timeLimit'];return;};const _0x31782d=_0x4510d0['puzzleStartTime'][_0x5a1911(0xc4)]();timerInterval=setInterval(async()=>{const _0xb6d99f=_0x5a1911,_0xbb95c5=Math[_0xb6d99f(0x17a)]((Date[_0xb6d99f(0x13a)]()-_0x31782d)/0x3e8),_0x101633=_0x5b69d4[_0xb6d99f(0x12a)]-_0xbb95c5;if(_0x101633<=0x0){clearInterval(timerInterval),gameTimerEl['textContent']=_0xb6d99f(0x142);if(!isHost){toast('หมดเวลาสำหรับข้อนี้!');const _0x490841=_0x555171[_0xb6d99f(0xfc)][currentPlayerName],_0x3a355a=_0x490841['currentPuzzle']+0x1,_0x3a4384={[_0xb6d99f(0x13e)+currentPlayerName+'.currentPuzzle']:_0x3a355a};_0x3a355a<_0x5b69d4[_0xb6d99f(0xec)]?_0x3a4384[_0xb6d99f(0x13e)+currentPlayerName+_0xb6d99f(0xe1)]=serverTimestamp():_0x3a4384[_0xb6d99f(0x13e)+currentPlayerName+_0xb6d99f(0x122)]=serverTimestamp(),await updateDoc(doc(db,_0xb6d99f(0x192)+appId+'/public/data/games',currentGameId),_0x3a4384);}}else gameTimerEl[_0xb6d99f(0xe9)]=_0xb6d99f(0x15b)+String(_0x101633)[_0xb6d99f(0x181)](0x2,'0');},0x1f4);}}function renderPlayingView(_0x505bce){const _0x4dfb88=_0x1ed244;document[_0x4dfb88(0x19b)][_0x4dfb88(0x198)][_0x4dfb88(0x168)](_0x4dfb88(0x13d),isHost),document[_0x4dfb88(0x19b)][_0x4dfb88(0x198)][_0x4dfb88(0x168)](_0x4dfb88(0x110),!isHost),startOrUpdateTimer(_0x505bce),isHost?renderAdminGameView(_0x505bce):renderPlayerGameView(_0x505bce);}function renderAdminGameView(_0x51d2e0){const _0x551109=_0x1ed244;hostControls['classList'][_0x551109(0x14f)](_0x551109(0x119)),toggleLeaderboardBtn[_0x551109(0x198)][_0x551109(0x14f)](_0x551109(0x119));const _0x59f28e=_0x51d2e0['players']||{},_0x24460c=Object[_0x551109(0x138)](_0x59f28e)[_0x551109(0x108)]((_0x41d196,_0x8445bc)=>(_0x8445bc[0x1][_0x551109(0x128)]||0x0)-(_0x41d196[0x1][_0x551109(0x128)]||0x0)),_0x37d63a=_0x51d2e0[_0x551109(0x116)][_0x551109(0xec)],_0x465dc7=_0x37d63a>0x1f4;playerList[_0x551109(0x158)]=_0x24460c[_0x551109(0xee)](([_0x748621,_0x5f05e1])=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+_0x748621+_0x551109(0x196)+(_0x5f05e1[_0x551109(0x128)]||0x0)+_0x551109(0x178)+(_0x5f05e1[_0x551109(0x199)]>=_0x37d63a?'สำเร็จ':_0x551109(0x136)+(_0x5f05e1['currentPuzzle']+0x1))+_0x551109(0xf2))[_0x551109(0x152)]('');const _0xe5fc9e=_0x51d2e0['gameMode']?.['timerMode']||_0x551109(0x164);let _0xd6221b=0x0;if(_0xe5fc9e===_0x551109(0x164)){const _0x2ab249=Math[_0x551109(0xf5)](0x0,...Object[_0x551109(0xf8)](_0x59f28e)[_0x551109(0xee)](_0x36dcb1=>_0x36dcb1['currentPuzzle']||0x0));_0x2ab249>adminDisplayedPuzzleIndex&&(adminDisplayedPuzzleIndex=_0x2ab249),_0xd6221b=adminDisplayedPuzzleIndex;}else{const _0x193418=_0x24460c[0x0];_0x193418&&(_0xd6221b=_0x193418[0x1][_0x551109(0x199)]||0x0);}_0xd6221b=Math[_0x551109(0xbf)](_0xd6221b,_0x37d63a-0x1);const _0x37baa5=_0x465dc7?_0x551109(0x18e)+(_0xd6221b+0x1):_0x551109(0x18e)+(_0xd6221b+0x1)+_0x551109(0x173)+_0x37d63a;puzzleProgressEl[_0x551109(0xe9)]=_0x37baa5,puzzleProgressEl[_0x551109(0x198)][_0x551109(0x14f)]('hidden');const _0x213b4e=JSON[_0x551109(0x13b)](_0x51d2e0['puzzles']),_0x36485f=_0x213b4e[_0xd6221b];gameBoard['classList']['remove'](_0x551109(0x119)),playerFinishedView[_0x551109(0x198)][_0x551109(0xea)]('hidden'),grid['innerHTML']=_0x36485f['map'](_0x38b1eb=>_0x551109(0x176)+_0x38b1eb+_0x551109(0x18c))[_0x551109(0x152)](''),$$(_0x551109(0xd9))[_0x551109(0xf7)](_0x42f1da=>_0x42f1da[_0x551109(0x198)][_0x551109(0xea)](_0x551109(0x153),_0x551109(0xfa))),$(_0x551109(0x12f))[_0x551109(0x198)]['add']('hidden'),$(_0x551109(0x137))[_0x551109(0x198)]['add']('hidden');}function renderPlayerGameView(_0x4d8c25){const _0x557ef1=_0x1ed244,_0x1d9611=_0x4d8c25[_0x557ef1(0xfc)][currentPlayerName];if(!_0x1d9611)return;playerScoreDisplay[_0x557ef1(0xe9)]=_0x557ef1(0x15c)+(_0x1d9611[_0x557ef1(0x128)]||0x0),playerScoreDisplay['classList']['remove'](_0x557ef1(0x119));const _0xbe2c2d=_0x4d8c25[_0x557ef1(0x116)]?.['leaderboardMode']||_0x557ef1(0x104),_0x3cf1e1=_0x4d8c25[_0x557ef1(0x116)][_0x557ef1(0xec)],_0x398d0f=_0x3cf1e1>0x1f4;if(_0x1d9611[_0x557ef1(0x199)]>=_0x3cf1e1)_0xbe2c2d===_0x557ef1(0x100)?(gameBoard[_0x557ef1(0x198)][_0x557ef1(0xea)]('hidden'),playerFinishedView[_0x557ef1(0x198)][_0x557ef1(0x14f)](_0x557ef1(0x119))):(gameBoard[_0x557ef1(0x198)][_0x557ef1(0xea)]('hidden'),playerFinishedView[_0x557ef1(0x198)][_0x557ef1(0x14f)]('hidden'),$(_0x557ef1(0x17e))[_0x557ef1(0xe9)]=_0x557ef1(0x11a),$(_0x557ef1(0xcf))['textContent']=_0x557ef1(0x18a));else{gameBoard['classList'][_0x557ef1(0x14f)](_0x557ef1(0x119)),playerFinishedView['classList']['add'](_0x557ef1(0x119));const _0x2a2709=_0x398d0f?_0x557ef1(0x136)+(_0x1d9611['currentPuzzle']+0x1):_0x557ef1(0x136)+(_0x1d9611[_0x557ef1(0x199)]+0x1)+'\x20/\x20'+_0x3cf1e1;puzzleProgressEl['textContent']=_0x2a2709,puzzleProgressEl['classList']['remove'](_0x557ef1(0x119));const _0x439349=JSON[_0x557ef1(0x13b)](_0x4d8c25[_0x557ef1(0x16c)]),_0x3c5222=_0x439349[_0x1d9611['currentPuzzle']];JSON['stringify'](currentPuzzleNumbers)!==JSON[_0x557ef1(0x11f)](_0x3c5222)&&(currentPuzzleNumbers=[..._0x3c5222],resetLocalBoard());}}function renderGameOverView(_0x11017b){const _0x1ae5a5=_0x1ed244,_0x11c410=_0x11017b['players']||{},_0xb2145a=Object['entries'](_0x11c410)[_0x1ae5a5(0x108)](([,_0x1dd672],[,_0x57d8af])=>{const _0x1d5398=_0x1ae5a5;if(_0x1dd672[_0x1d5398(0x128)]!==_0x57d8af[_0x1d5398(0x128)])return(_0x57d8af[_0x1d5398(0x128)]||0x0)-(_0x1dd672['score']||0x0);if(_0x57d8af[_0x1d5398(0xca)]&&_0x1dd672[_0x1d5398(0xca)])return _0x1dd672[_0x1d5398(0xca)][_0x1d5398(0xc4)]()-_0x57d8af['finishTime']['toMillis']();if(_0x57d8af[_0x1d5398(0xca)])return-0x1;if(_0x1dd672['finishTime'])return 0x1;return 0x0;});podiumContainer[_0x1ae5a5(0x158)]='',otherRankingsList['innerHTML']='';const _0x4baa81=_0xb2145a[_0x1ae5a5(0x156)](0x0,0x3),_0x39145c=_0xb2145a['slice'](0x3);_0x4baa81[_0x1ae5a5(0xf7)](([_0x4c381c,_0x4fbd3a],_0xf5156)=>{const _0x2f21c4=_0x1ae5a5,_0x26ed20=_0xf5156+0x1,_0x3f94cd=document[_0x2f21c4(0x14d)](_0x2f21c4(0x16a));_0x3f94cd[_0x2f21c4(0x16d)]=_0x2f21c4(0xed)+_0x26ed20,_0x3f94cd[_0x2f21c4(0x158)]=_0x2f21c4(0x135)+(_0x26ed20===0x1?'<i\x20class=\x22fas\x20fa-crown\x22></i>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+_0x4c381c+_0x2f21c4(0xc6)+(_0x4fbd3a[_0x2f21c4(0x128)]||0x0)+_0x2f21c4(0xcc)+_0x26ed20+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',podiumContainer['appendChild'](_0x3f94cd);});for(let _0xff6c5e=_0xb2145a['length'];_0xff6c5e<0x3;_0xff6c5e++){const _0x11273b=_0xff6c5e+0x1,_0x38e4a7=document['createElement'](_0x1ae5a5(0x16a));_0x38e4a7[_0x1ae5a5(0x16d)]=_0x1ae5a5(0xed)+_0x11273b,podiumContainer['appendChild'](_0x38e4a7);}_0x39145c['length']>0x0?(otherRankingsContainer[_0x1ae5a5(0x198)][_0x1ae5a5(0x14f)]('hidden'),otherRankingsList['innerHTML']=_0x39145c[_0x1ae5a5(0xee)](([_0xefbb87,_0x5def1f],_0x5cc74d)=>_0x1ae5a5(0x117)+(_0x5cc74d+0x4)+'.\x20'+_0xefbb87+_0x1ae5a5(0xbe)+(_0x5def1f[_0x1ae5a5(0x128)]||0x0)+_0x1ae5a5(0x160))[_0x1ae5a5(0x152)]('')):otherRankingsContainer[_0x1ae5a5(0x198)]['add'](_0x1ae5a5(0x119)),isHost?$(_0x1ae5a5(0x143))[_0x1ae5a5(0x198)]['remove'](_0x1ae5a5(0x119)):$(_0x1ae5a5(0x143))[_0x1ae5a5(0x198)][_0x1ae5a5(0xea)](_0x1ae5a5(0x119)),showView(_0x1ae5a5(0xe3));}function renderLocalGrid(){const _0x292af3=_0x1ed244;grid['innerHTML']='';firstIndex!==null?grid[_0x292af3(0x198)][_0x292af3(0xea)](_0x292af3(0x15e)):grid[_0x292af3(0x198)]['remove'](_0x292af3(0x15e));for(let _0x162ded=0x0;_0x162ded<0x4;_0x162ded++){const _0x12f735=localBoard[_0x162ded],_0x2a8252=document[_0x292af3(0x14d)](_0x292af3(0x16a));_0x12f735===null?_0x2a8252[_0x292af3(0x16d)]=_0x292af3(0xfe):(_0x2a8252[_0x292af3(0x16d)]=_0x292af3(0x134)+(_0x162ded===firstIndex?_0x292af3(0x159):''),_0x2a8252[_0x292af3(0x158)]=fmt(_0x12f735),_0x2a8252[_0x292af3(0x111)](_0x292af3(0x14b),()=>handleTileClick(_0x162ded))),grid['appendChild'](_0x2a8252);}$$(_0x292af3(0xd9))[_0x292af3(0xf7)](_0x2a517a=>_0x2a517a[_0x292af3(0x198)]['toggle'](_0x292af3(0x17b),_0x2a517a[_0x292af3(0x148)]['op']===selectedOp));}function resetLocalBoard(){const _0x5e5ebe=_0x1ed244;localBoard=currentPuzzleNumbers[_0x5e5ebe(0xee)](_0x3b29dc=>({'n':_0x3b29dc,'d':0x1})),firstIndex=null,selectedOp=null,renderLocalGrid();}async function handleTileClick(_0x1b9bdd){const _0x50f358=_0x1ed244;if(localBoard[_0x1b9bdd]===null)return;if(firstIndex===_0x1b9bdd){firstIndex=null,renderLocalGrid();return;}if(firstIndex===null||selectedOp===null){firstIndex=_0x1b9bdd,renderLocalGrid();return;}const _0x1a89e4=localBoard[firstIndex],_0xfbcce4=localBoard[_0x1b9bdd];let _0x14ec51,_0x156e9d,_0x5c5a35;if(selectedOp==='+')_0x156e9d=_0x1a89e4['n']*_0xfbcce4['d']+_0xfbcce4['n']*_0x1a89e4['d'],_0x5c5a35=_0x1a89e4['d']*_0xfbcce4['d'];else{if(selectedOp==='-')_0x156e9d=_0x1a89e4['n']*_0xfbcce4['d']-_0xfbcce4['n']*_0x1a89e4['d'],_0x5c5a35=_0x1a89e4['d']*_0xfbcce4['d'];else{if(selectedOp==='*')_0x156e9d=_0x1a89e4['n']*_0xfbcce4['n'],_0x5c5a35=_0x1a89e4['d']*_0xfbcce4['d'];else{if(selectedOp==='/'){if(_0xfbcce4['n']===0x0){toast(_0x50f358(0xe0));return;}_0x156e9d=_0x1a89e4['n']*_0xfbcce4['d'],_0x5c5a35=_0x1a89e4['d']*_0xfbcce4['n'];}}}}_0x5c5a35<0x0&&(_0x5c5a35=-_0x5c5a35,_0x156e9d=-_0x156e9d);const _0x4f515b=gcd(Math['abs'](_0x156e9d),Math[_0x50f358(0x17d)](_0x5c5a35));_0x14ec51={'n':_0x156e9d/_0x4f515b,'d':_0x5c5a35/_0x4f515b},localBoard[_0x1b9bdd]=_0x14ec51,localBoard[firstIndex]=null,firstIndex=_0x1b9bdd,selectedOp=null,renderLocalGrid();const _0x3794d3=localBoard['filter'](_0x54acbc=>_0x54acbc!==null);if(_0x3794d3[_0x50f358(0xe5)]===0x1){const _0x309c80=_0x3794d3[0x0];if(_0x309c80['d']===0x1&&_0x309c80['n']===0x18){if(isPracticeMode){toast(_0x50f358(0x10e)),setTimeout(()=>{currentPuzzleNumbers=randomSolvable(),resetLocalBoard();},0x4b0);return;}const _0x3a9735=doc(db,_0x50f358(0x192)+appId+_0x50f358(0x132),currentGameId);try{await runTransaction(db,async _0x2ca69e=>{const _0x35c222=_0x50f358,_0x1616a4=await _0x2ca69e['get'](_0x3a9735);if(!_0x1616a4['exists']()||_0x1616a4[_0x35c222(0x12c)]()[_0x35c222(0xd7)]!==_0x35c222(0x169))return;const _0x3732b0=_0x1616a4[_0x35c222(0x12c)](),_0x4c87e0=_0x3732b0[_0x35c222(0xfc)][currentPlayerName],_0xd66f40=_0x3732b0['gameMode']||{'scoringMode':_0x35c222(0x190),'timerMode':_0x35c222(0x164)};let _0x57abd4=0x0;if(_0xd66f40[_0x35c222(0x194)]==='fixed')_0x57abd4=0x64;else{if(_0xd66f40[_0x35c222(0x14e)]===_0x35c222(0x164)){const _0x5ecc31=_0x3732b0[_0x35c222(0xe4)][_0x35c222(0xc4)](),_0x3ead23=Math[_0x35c222(0x17a)]((Date[_0x35c222(0x13a)]()-_0x5ecc31)/0x3e8);_0x57abd4=0x64+Math['max'](0x0,_0xd66f40[_0x35c222(0x12a)]-_0x3ead23);}else{const _0x41a4af=_0x4c87e0[_0x35c222(0xdb)]['toMillis'](),_0x1951f0=Math[_0x35c222(0x17a)]((Date[_0x35c222(0x13a)]()-_0x41a4af)/0x3e8);_0x57abd4=0x64+Math['max'](0x0,_0xd66f40[_0x35c222(0x12a)]-_0x1951f0);}}const _0x6e501d=_0x4c87e0['currentPuzzle']+0x1,_0x5148ee={['players.'+currentPlayerName+'.currentPuzzle']:_0x6e501d,['players.'+currentPlayerName+_0x35c222(0xd8)]:increment(_0x57abd4)};_0x6e501d<_0xd66f40[_0x35c222(0xec)]?_0x5148ee['players.'+currentPlayerName+_0x35c222(0xe1)]=serverTimestamp():_0x5148ee[_0x35c222(0x13e)+playerName+_0x35c222(0x122)]=serverTimestamp(),_0x2ca69e[_0x35c222(0x113)](_0x3a9735,_0x5148ee);});}catch(_0x213ce0){console[_0x50f358(0x17f)](_0x50f358(0x13c),_0x213ce0);}}else toast(_0x50f358(0xc2)),setTimeout(()=>{resetLocalBoard();},0x5dc);}}function handleSettingsChange(){const _0x32ed5d=_0x1ed244,_0x148601=document[_0x32ed5d(0x140)](_0x32ed5d(0x177))['value'];_0x148601==='wait'?(stageModeUnlimitedRadio[_0x32ed5d(0x150)]=![],unlimitedStageContainer[_0x32ed5d(0x198)][_0x32ed5d(0x14f)]('opacity-60',_0x32ed5d(0xfa)),unlimitedStageContainer[_0x32ed5d(0x140)](_0x32ed5d(0x13f))[_0x32ed5d(0x198)][_0x32ed5d(0x14f)](_0x32ed5d(0xfa))):(stageModeUnlimitedRadio[_0x32ed5d(0x150)]=!![],stageModeUnlimitedRadio['checked']&&(stageModeLimitedRadio[_0x32ed5d(0x11e)]=!![]),unlimitedStageContainer['classList'][_0x32ed5d(0xea)]('opacity-60','cursor-not-allowed'),unlimitedStageContainer['querySelector'](_0x32ed5d(0x13f))[_0x32ed5d(0x198)][_0x32ed5d(0xea)](_0x32ed5d(0xfa))),numQuestionsInput['disabled']=!stageModeLimitedRadio[_0x32ed5d(0x11e)];}$(_0x1ed244(0x174))[_0x1ed244(0x111)]('click',()=>showView(_0x1ed244(0x10b))),$(_0x1ed244(0x16f))[_0x1ed244(0x111)](_0x1ed244(0x14b),()=>showView(_0x1ed244(0x10d))),$(_0x1ed244(0x114))[_0x1ed244(0x111)](_0x1ed244(0x14b),async()=>{const _0x1250ed=_0x1ed244;$('#admin-password-input')['value']==='8899'?(isHost=!![],await createGameRoom()):toast(_0x1250ed(0xcb));}),$(_0x1ed244(0x157))[_0x1ed244(0x111)](_0x1ed244(0x14b),handleJoinGame),$(_0x1ed244(0x10f))[_0x1ed244(0x111)](_0x1ed244(0x14b),startPracticeMode),$('#open-settings-btn')['addEventListener'](_0x1ed244(0x14b),()=>{const _0x6bf347=_0x1ed244;adminSettingsModal[_0x6bf347(0x198)][_0x6bf347(0x14f)]('hidden');}),$(_0x1ed244(0x189))['addEventListener'](_0x1ed244(0x14b),()=>{const _0x47ea71=_0x1ed244;adminSettingsModal[_0x47ea71(0x198)][_0x47ea71(0xea)]('hidden');}),$(_0x1ed244(0xd1))[_0x1ed244(0x111)]('click',handleStartGame),$(_0x1ed244(0x10a))['addEventListener'](_0x1ed244(0x14b),forceEndGame),$(_0x1ed244(0x143))['addEventListener'](_0x1ed244(0x14b),returnToLobby),$(_0x1ed244(0x137))[_0x1ed244(0x111)](_0x1ed244(0x14b),()=>{isPracticeMode=![];if(unsubscribeGameListener)unsubscribeGameListener();if(timerInterval)clearInterval(timerInterval);currentGameId=null,currentPlayerName=null,showView('player-join');}),$('#reset-btn')[_0x1ed244(0x111)](_0x1ed244(0x14b),resetLocalBoard),$$(_0x1ed244(0xd9))[_0x1ed244(0xf7)](_0xe8c7d1=>_0xe8c7d1[_0x1ed244(0x111)](_0x1ed244(0x14b),()=>{const _0x286828=_0x1ed244,_0x46969b=_0xe8c7d1[_0x286828(0x148)]['op'];if(selectedOp===_0x46969b)selectedOp=null;else{if(firstIndex===null){toast(_0x286828(0xf9));return;}selectedOp=_0x46969b;}renderLocalGrid();})),toggleLeaderboardBtn['addEventListener'](_0x1ed244(0x14b),()=>{const _0x1535d9=_0x1ed244,_0x404e2f=document['querySelector'](_0x1535d9(0x12b));_0x404e2f[_0x1535d9(0x198)][_0x1535d9(0x168)]('collapsed');const _0x4380a1=toggleLeaderboardBtn[_0x1535d9(0x140)]('i');_0x404e2f[_0x1535d9(0x198)][_0x1535d9(0xd0)](_0x1535d9(0x170))?_0x4380a1[_0x1535d9(0x16d)]='fas\x20fa-eye':_0x4380a1[_0x1535d9(0x16d)]=_0x1535d9(0xd4);}),numQuestionsInput['addEventListener'](_0x1ed244(0x105),()=>{stageModeLimitedRadio['checked']=!![],handleSettingsChange();}),$$(_0x1ed244(0xe7))[_0x1ed244(0xf7)](_0x13c958=>_0x13c958[_0x1ed244(0x111)](_0x1ed244(0x165),handleSettingsChange)),$$(_0x1ed244(0xc0))[_0x1ed244(0xf7)](_0x65dda0=>_0x65dda0[_0x1ed244(0x111)](_0x1ed244(0x165),handleSettingsChange)),window['addEventListener'](_0x1ed244(0x186),()=>{const _0x294588=_0x1ed244;if(isHost&&currentGameId){const _0xc991=doc(db,_0x294588(0x192)+appId+_0x294588(0x132),currentGameId);deleteDoc(_0xc991);}}),initialize(),showView('player-join'),handleSettingsChange();
