const _0x5d43b5=_0x3c29;(function(_0x3d9a83,_0x3311b5){const _0xe242e0=_0x3c29,_0x1d7113=_0x3d9a83();while(!![]){try{const _0xaab7c0=-parseInt(_0xe242e0(0x139))/0x1+-parseInt(_0xe242e0(0x176))/0x2*(-parseInt(_0xe242e0(0x1e7))/0x3)+-parseInt(_0xe242e0(0x181))/0x4*(-parseInt(_0xe242e0(0x165))/0x5)+parseInt(_0xe242e0(0x1ce))/0x6+parseInt(_0xe242e0(0x194))/0x7+-parseInt(_0xe242e0(0x135))/0x8+-parseInt(_0xe242e0(0x169))/0x9*(parseInt(_0xe242e0(0x18e))/0xa);if(_0xaab7c0===_0x3311b5)break;else _0x1d7113['push'](_0x1d7113['shift']());}catch(_0x12cabd){_0x1d7113['push'](_0x1d7113['shift']());}}}(_0x4331,0x41c1f));function _0x4331(){const _0x20331e=['#admin-login-modal','439539uuOOqf','8899','leaderboardMode','1:989271279576:web:43115bbaeeae31160954ad','timeLimit','opacity-50','style','innerHTML','values','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','overall','เกิดข้อผิดพลาดในการกลับสู่ล็อบบี้','currentPuzzle','slice','click','/public/data/games','admin-lobby','#game-code-display','#start-practice-btn','.op','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','Authenticated\x20user:','admin-login','tile','fixed','toggle','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-row\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','ถูกต้อง!\x20โจทย์ข้อต่อไป...','#lobby-player-name-list','โหมดฝึกซ้อม','<i\x20class=\x22fas\x20fa-crown\x22></i>','number-selected','numQuestions','playing','989271279576','now','score','#other-rankings-container','#lobby-player-count','หารด้วยศูนย์ไม่ได้','#player-join-view','ลองอีกครั้ง!','div','game24-69666.firebasestorage.app','2367880LIDCwi','.main-game','#end-game-btn','dataset','896949TNddsa',';\x22>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-progress\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','value','finishTime','puzzleStartTime','admin-view','remove','toMillis','floor','สำเร็จ','speed','textContent','654134jdfvBz','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','querySelector','Error\x20returning\x20to\x20lobby:','#puzzle-progress','เวลาข้อนี้:\x20','exists','#player-wait-view','addEventListener','finished','add','4ePwnRU','G-B1ZTE90SGG','เข้าร่วมสำเร็จ!\x20รอสักครู่...','#admin-back-btn','filter','#admin-password-input','startTime','#player-finished-view','players','timerMode','#player-list','#themeSelect','#home-btn','40EIfrhq','classList','puzzles','<div\x20class=\x22tile\x22>','#admin-icon-btn','.score','3552927idwCUa','#time-limit-input','lobby','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','forEach','setItem','#player-name-input','toString','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-score\x22>','max','2rem','gameMode','className','contrast','\x20คะแนน</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','หมดเวลาสำหรับข้อนี้!','documentElement','แอดมินได้สร้างห้องใหม่แล้ว','player-view','#player-score-display','getItem','createElement','map','<span\x20style=\x22font-size:\x20','<div\x20class=\x22lobby-player-tag\x22>','#game-code-input','fas\x20fa-eye-slash','Authentication\x20failed:','trim','slot\x20empty','#other-rankings-list','show','join','#game-timer','player-wait','Firebase\x20init\x20failed:','entries','กรุณากรอกข้อมูลให้ครบถ้วน','artifacts/','apiKey','error','ไม่สามารถเข้าร่วมได้\x20เกมเริ่มไปแล้ว','podium-stand\x20podium-','ด่าน\x20','Game\x20does\x20not\x20exist!','#admin-login-btn','undefined','sort','hidden','message','setAttribute','#game-view','#start-game-btn','data','รอผลการแข่งขันสักครู่...','.finishTime','uid','player-join','1166280toMWtb','คะแนน:\x20','.sidebar','abs','.leaderboard','min','stringify','.puzzleStartTime','\x20sel','#grid','scoringMode','collapsed','Error\x20advancing\x20puzzle:','</div>','immediate','#back-to-lobby-btn','game','เกิดข้อผิดพลาดในการเริ่มเกม','Error\x20joining\x20game:','.currentPuzzle','#join-game-btn','ไม่พบห้องเกมนี้','กรุณาเลือกตัวเลขก่อน','from','update','3RDkwmS','<p\x20class=\x22text-gray-500\x20text-center\x20w-full\x22>ยังไม่มีใครเข้าร่วม...</p>','Firebase\x20configuration\x20is\x20missing.','cursor-not-allowed','#open-settings-btn','padStart','center','\x20แทน','#toast','Authentication\x20failed.\x20Please\x20refresh.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','wait','change','รหัสผ่านไม่ถูกต้อง','get','length','หมดเวลา!','#game-board','#game-over-view','querySelectorAll','contains','เวลา:\x2000:00','#toggle-leaderboard-btn','game-over','log','\x20คะแนน</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>','appendChild','#podium-container','input[name=\x22leaderboardMode\x22]:checked','players.','status','Firebase\x20config\x20is\x20missing.\x20App\x20cannot\x20start.','sel','ห้องเกมถูกปิดแล้ว','body','admin-settings','เวลา:\x20','3160464dkqdru','g24_theme_mp','#admin-settings-modal'];_0x4331=function(){return _0x20331e;};return _0x4331();}import{initializeApp}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';import{getAuth,signInAnonymously,signInWithCustomToken,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,onSnapshot,serverTimestamp,runTransaction,deleteDoc,Timestamp,deleteField,increment}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';const defaultFirebaseConfig={'apiKey':'AIzaSyAJsk4l8I8uCYpJY8jZLAlRW1w2qLWN-2o','authDomain':'game24-69666.firebaseapp.com','projectId':'game24-69666','storageBucket':_0x5d43b5(0x164),'messagingSenderId':_0x5d43b5(0x15b),'appId':_0x5d43b5(0x13c),'measurementId':_0x5d43b5(0x182)},appId=typeof __app_id!==_0x5d43b5(0x1c2)?__app_id:'game24-default',firebaseConfig=typeof __firebase_config!==_0x5d43b5(0x1c2)?JSON['parse'](__firebase_config):defaultFirebaseConfig,$=_0x21525d=>document['querySelector'](_0x21525d),$$=_0x47d28b=>Array[_0x5d43b5(0x1e5)](document[_0x5d43b5(0x123)](_0x47d28b)),playerJoinView=$(_0x5d43b5(0x161)),playerWaitView=$(_0x5d43b5(0x17d)),adminLobbyView=$('#admin-lobby-view'),gameView=$(_0x5d43b5(0x1c7)),adminLoginModal=$(_0x5d43b5(0x138)),adminSettingsModal=$(_0x5d43b5(0x137)),gameOverView=$(_0x5d43b5(0x122)),grid=$(_0x5d43b5(0x1d7)),playerList=$(_0x5d43b5(0x18b)),lobbyPlayerNameList=$(_0x5d43b5(0x155)),lobbyPlayerCount=$(_0x5d43b5(0x15f)),hostControls=$('#host-controls'),toastEl=$(_0x5d43b5(0x1ef)),gameCodeDisplay=$(_0x5d43b5(0x14a)),gameTimerEl=$('#game-timer'),puzzleProgressEl=$(_0x5d43b5(0x17a)),playerScoreDisplay=$('#player-score-display'),gameBoard=$(_0x5d43b5(0x121)),playerFinishedView=$(_0x5d43b5(0x188)),podiumContainer=$(_0x5d43b5(0x12b)),otherRankingsList=$(_0x5d43b5(0x1b2)),otherRankingsContainer=$(_0x5d43b5(0x15e)),toggleLeaderboardBtn=$(_0x5d43b5(0x126));let db,auth,userId,currentPlayerName,isHost=![],currentGameId=null,isPracticeMode=![],unsubscribeGameListener=null,timerInterval=null,localBoard=[null,null,null,null],currentPuzzleNumbers=[],firstIndex=null,selectedOp=null,adminDisplayedPuzzleIndex=0x0,previousGameStatus=null,gameSettings={'numQuestions':0xa,'timeLimit':0xb4,'timerMode':_0x5d43b5(0x143),'scoringMode':_0x5d43b5(0x174),'leaderboardMode':_0x5d43b5(0x1dc)};function toast(_0x9c1751,_0x2a72aa=0x7d0){const _0xac339f=_0x5d43b5;toastEl['textContent']=_0x9c1751,toastEl['classList'][_0xac339f(0x180)](_0xac339f(0x1b3)),setTimeout(()=>toastEl[_0xac339f(0x18f)][_0xac339f(0x170)](_0xac339f(0x1b3)),_0x2a72aa);}const rnd=(_0x899c2e,_0x41ee84)=>Math[_0x5d43b5(0x172)](Math['random']()*(_0x41ee84-_0x899c2e+0x1))+_0x899c2e;function gcd(_0x2c8add,_0x4b709d){return _0x4b709d===0x0?_0x2c8add:gcd(_0x4b709d,_0x2c8add%_0x4b709d);}const fmt=_0x43163c=>{const _0x17279a=_0x5d43b5;if(_0x43163c['d']===0x1)return String(_0x43163c['n']);const _0x3bc3d3=String(_0x43163c['n'])[_0x17279a(0x11f)]>0x2||String(_0x43163c['d'])[_0x17279a(0x11f)]>0x2?_0x17279a(0x19e):'clamp(2.5rem,\x2010vw,\x204rem)';return _0x17279a(0x1ab)+_0x3bc3d3+_0x17279a(0x16a)+_0x43163c['n']+'/'+_0x43163c['d']+'</span>';},themeKey=_0x5d43b5(0x136),themeSelect=$(_0x5d43b5(0x18c));function applyTheme(_0x2f8b93){const _0x4ec97d=_0x5d43b5;document[_0x4ec97d(0x1a4)][_0x4ec97d(0x1c6)]('data-theme',_0x2f8b93),localStorage[_0x4ec97d(0x199)](themeKey,_0x2f8b93);}const savedTheme=localStorage[_0x5d43b5(0x1a8)](themeKey),initialTheme=savedTheme||_0x5d43b5(0x1a1);applyTheme(initialTheme);themeSelect&&(themeSelect[_0x5d43b5(0x16c)]=initialTheme,themeSelect[_0x5d43b5(0x17e)](_0x5d43b5(0x1f3),()=>applyTheme(themeSelect[_0x5d43b5(0x16c)])));function solve24(_0x2eadcc){function _0x5be96f(_0xc13460){const _0x2d679f=_0x3c29;if(_0xc13460[_0x2d679f(0x11f)]===0x1)return Math[_0x2d679f(0x1d1)](_0xc13460[0x0]-0x18)<0.000001;for(let _0x24f4c7=0x0;_0x24f4c7<_0xc13460[_0x2d679f(0x11f)];_0x24f4c7++){for(let _0x1cdda9=0x0;_0x1cdda9<_0xc13460[_0x2d679f(0x11f)];_0x1cdda9++){if(_0x24f4c7===_0x1cdda9)continue;const _0x2baa28=_0xc13460[_0x24f4c7],_0x379e55=_0xc13460[_0x1cdda9],_0x12b5f2=_0xc13460[_0x2d679f(0x185)]((_0x453a31,_0x59077e)=>_0x59077e!==_0x24f4c7&&_0x59077e!==_0x1cdda9);if(_0x5be96f([_0x2baa28+_0x379e55,..._0x12b5f2])||_0x5be96f([_0x2baa28-_0x379e55,..._0x12b5f2])||_0x5be96f([_0x2baa28*_0x379e55,..._0x12b5f2])||_0x379e55!==0x0&&_0x5be96f([_0x2baa28/_0x379e55,..._0x12b5f2]))return!![];}}return![];}return _0x5be96f(_0x2eadcc);}function randomSolvable(){for(let _0x2dfafe=0x0;_0x2dfafe<0x1f4;_0x2dfafe++){const _0x1fbe18=[rnd(0x1,0x9),rnd(0x1,0x9),rnd(0x1,0x9),rnd(0x1,0x9)];if(solve24(_0x1fbe18))return _0x1fbe18;}return[0x1,0x2,0x3,0x4];}function showView(_0x51ebe7){const _0x491622=_0x5d43b5;[playerJoinView,playerWaitView,adminLoginModal,adminLobbyView,adminSettingsModal,gameView,gameOverView]['forEach'](_0x369776=>_0x369776[_0x491622(0x18f)]['add'](_0x491622(0x1c4)));const _0x5118d6=$(_0x491622(0x192));if(_0x51ebe7==='player-join'||_0x51ebe7==='admin-login')_0x5118d6[_0x491622(0x18f)][_0x491622(0x170)]('hidden');else isHost?_0x5118d6[_0x491622(0x18f)][_0x491622(0x170)](_0x491622(0x1c4)):_0x5118d6[_0x491622(0x18f)][_0x491622(0x180)](_0x491622(0x1c4));if(_0x51ebe7===_0x491622(0x1cd))playerJoinView[_0x491622(0x18f)]['remove'](_0x491622(0x1c4));else{if(_0x51ebe7===_0x491622(0x1b6))playerWaitView[_0x491622(0x18f)][_0x491622(0x170)](_0x491622(0x1c4));else{if(_0x51ebe7===_0x491622(0x14f))adminLoginModal[_0x491622(0x18f)]['remove'](_0x491622(0x1c4));else{if(_0x51ebe7===_0x491622(0x149))adminLobbyView['classList'][_0x491622(0x170)](_0x491622(0x1c4));else{if(_0x51ebe7===_0x491622(0x133))adminSettingsModal[_0x491622(0x18f)][_0x491622(0x170)](_0x491622(0x1c4));else{if(_0x51ebe7===_0x491622(0x1de))gameView[_0x491622(0x18f)][_0x491622(0x170)](_0x491622(0x1c4)),isPracticeMode?($(_0x491622(0x1d0))[_0x491622(0x18f)][_0x491622(0x180)](_0x491622(0x1c4)),document[_0x491622(0x132)][_0x491622(0x18f)][_0x491622(0x180)]('player-view'),document[_0x491622(0x132)][_0x491622(0x18f)][_0x491622(0x170)]('admin-view'),$(_0x491622(0x1a7))['classList'][_0x491622(0x180)](_0x491622(0x1c4)),$(_0x491622(0x17a))[_0x491622(0x18f)][_0x491622(0x180)]('hidden'),$(_0x491622(0x1b5))[_0x491622(0x175)]=_0x491622(0x156),$(_0x491622(0x166))[_0x491622(0x13f)]['justifyContent']=_0x491622(0x1ed)):($(_0x491622(0x1d0))['classList'][_0x491622(0x170)]('hidden'),$(_0x491622(0x166))[_0x491622(0x13f)]['justifyContent']='');else{if(_0x51ebe7==='game-over')gameOverView[_0x491622(0x18f)][_0x491622(0x170)](_0x491622(0x1c4));}}}}}}}async function initialize(){const _0x16d98a=_0x5d43b5;try{if(!firebaseConfig[_0x16d98a(0x1bb)]){toast(_0x16d98a(0x1e9)),console[_0x16d98a(0x1bc)](_0x16d98a(0x12f));return;}const _0x183f1e=initializeApp(firebaseConfig);db=getFirestore(_0x183f1e),auth=getAuth(_0x183f1e),onAuthStateChanged(auth,async _0xeb324a=>{const _0x455cb0=_0x16d98a;if(_0xeb324a)userId=_0xeb324a[_0x455cb0(0x1cc)],console[_0x455cb0(0x128)](_0x455cb0(0x14e),userId);else try{typeof __initial_auth_token!==_0x455cb0(0x1c2)&&__initial_auth_token?await signInWithCustomToken(auth,__initial_auth_token):await signInAnonymously(auth);}catch(_0x5b73a4){console[_0x455cb0(0x1bc)](_0x455cb0(0x1af),_0x5b73a4),toast(_0x455cb0(0x1f0));}});}catch(_0x1247d0){console['error'](_0x16d98a(0x1b7),_0x1247d0),toast('การเชื่อมต่อล้มเหลว');}}async function createGameRoom(){const _0x4d0fbb=_0x5d43b5;showView('admin-lobby'),gameCodeDisplay['textContent']='...';const _0x266047=rnd(0xa,0x63)[_0x4d0fbb(0x19b)]();currentGameId=_0x266047;const _0x2f9e4c={'hostId':auth['currentUser'][_0x4d0fbb(0x1cc)],'status':_0x4d0fbb(0x196),'players':{},'createdAt':serverTimestamp()},_0x470db7=doc(db,_0x4d0fbb(0x1ba)+appId+_0x4d0fbb(0x148),currentGameId);await setDoc(_0x470db7,_0x2f9e4c),gameCodeDisplay['textContent']=currentGameId,listenForGameUpdates(currentGameId);}async function handleStartGame(){const _0x4c2fc1=_0x5d43b5;if(!isHost||!currentGameId)return;const _0x5dd3f8=parseInt($(_0x4c2fc1(0x195))[_0x4c2fc1(0x16c)],0xa)||0xb4,_0x4ccb0d=document['querySelector'](_0x4c2fc1(0x12c))[_0x4c2fc1(0x16c)];gameSettings[_0x4c2fc1(0x13d)]=_0x5dd3f8,gameSettings[_0x4c2fc1(0x13b)]=_0x4ccb0d,adminSettingsModal['classList'][_0x4c2fc1(0x180)]('hidden');const _0x43eae8=doc(db,_0x4c2fc1(0x1ba)+appId+'/public/data/games',currentGameId);try{await runTransaction(db,async _0x2c7232=>{const _0x56837f=_0x4c2fc1,_0x39986d=await _0x2c7232[_0x56837f(0x11e)](_0x43eae8);if(!_0x39986d[_0x56837f(0x17c)]())throw _0x56837f(0x1c0);const _0x24fb8d=_0x39986d['data']()['players'],_0x495ea4=Array['from']({'length':gameSettings['numQuestions']},()=>randomSolvable()),_0x2c6e74={'status':_0x56837f(0x15a),'puzzles':JSON[_0x56837f(0x1d4)](_0x495ea4),'startTime':serverTimestamp(),'gameMode':gameSettings};for(const _0x5ed10c in _0x24fb8d){_0x2c6e74[_0x56837f(0x12d)+_0x5ed10c+_0x56837f(0x1e1)]=0x0,_0x2c6e74[_0x56837f(0x12d)+_0x5ed10c+_0x56837f(0x193)]=0x0,_0x2c6e74[_0x56837f(0x12d)+_0x5ed10c+_0x56837f(0x1cb)]=null,_0x2c6e74[_0x56837f(0x12d)+_0x5ed10c+_0x56837f(0x1d5)]=serverTimestamp();}_0x2c7232['update'](_0x43eae8,_0x2c6e74);}),showView(_0x4c2fc1(0x1de));}catch(_0x24b793){console[_0x4c2fc1(0x1bc)]('Error\x20starting\x20game:',_0x24b793),toast(_0x4c2fc1(0x1df));}}async function forceEndGame(){const _0x440619=_0x5d43b5;if(!isHost||!currentGameId)return;const _0x36aa0c=doc(db,_0x440619(0x1ba)+appId+_0x440619(0x148),currentGameId),_0x2a1383=await getDoc(_0x36aa0c);_0x2a1383[_0x440619(0x17c)]()&&_0x2a1383[_0x440619(0x1c9)]()[_0x440619(0x12e)]===_0x440619(0x15a)&&await updateDoc(_0x36aa0c,{'status':_0x440619(0x17f)});}async function returnToLobby(){const _0x1d9b99=_0x5d43b5;if(!isHost||!currentGameId)return;const _0x5180bf=doc(db,'artifacts/'+appId+_0x1d9b99(0x148),currentGameId);try{await updateDoc(_0x5180bf,{'status':_0x1d9b99(0x196),'players':{},'puzzles':deleteField(),'startTime':deleteField(),'gameMode':deleteField()}),showView('admin-lobby');}catch(_0x53ffaa){console[_0x1d9b99(0x1bc)](_0x1d9b99(0x179),_0x53ffaa),toast(_0x1d9b99(0x144));}}async function handleJoinGame(){const _0x349426=_0x5d43b5,_0x464724=$(_0x349426(0x1ad))[_0x349426(0x16c)],_0xdecd5=$(_0x349426(0x19a))[_0x349426(0x16c)][_0x349426(0x1b0)]();if(!_0x464724||!_0xdecd5)return toast(_0x349426(0x1b9));currentGameId=_0x464724,currentPlayerName=_0xdecd5;const _0x3326a0=doc(db,_0x349426(0x1ba)+appId+'/public/data/games',currentGameId);try{await runTransaction(db,async _0xe4bc11=>{const _0x553c16=_0x349426,_0x2b668a=await _0xe4bc11[_0x553c16(0x11e)](_0x3326a0);if(!_0x2b668a[_0x553c16(0x17c)]())throw new Error(_0x553c16(0x1e3));const _0x3dc57e=_0x2b668a['data']();if(_0x3dc57e[_0x553c16(0x12e)]!==_0x553c16(0x196))throw new Error(_0x553c16(0x1bd));let _0x41df5a=_0xdecd5;_0x3dc57e[_0x553c16(0x189)][_0x41df5a]&&(_0x41df5a=''+_0xdecd5+rnd(0xa,0x63),toast('ชื่อซ้ำ,\x20เปลี่ยนเป็น\x20'+_0x41df5a+_0x553c16(0x1ee))),currentPlayerName=_0x41df5a,_0xe4bc11[_0x553c16(0x1e6)](_0x3326a0,{[_0x553c16(0x12d)+_0x41df5a]:{'joined':!![]}});}),toast(_0x349426(0x183)),listenForGameUpdates(currentGameId);}catch(_0x55625d){console['error'](_0x349426(0x1e0),_0x55625d),toast(_0x55625d[_0x349426(0x1c5)]);}}function startPracticeMode(){const _0xcf17d5=_0x5d43b5;isPracticeMode=!![],isHost=![],currentPuzzleNumbers=randomSolvable(),resetLocalBoard(),showView(_0xcf17d5(0x1de));}function listenForGameUpdates(_0x38e0a5){const _0x1594a9=_0x5d43b5;if(unsubscribeGameListener)unsubscribeGameListener();const _0x5b33c2=doc(db,_0x1594a9(0x1ba)+appId+_0x1594a9(0x148),_0x38e0a5);unsubscribeGameListener=onSnapshot(_0x5b33c2,_0x573546=>{const _0x396620=_0x1594a9;if(!_0x573546[_0x396620(0x17c)]()){toast(_0x396620(0x131));if(unsubscribeGameListener)unsubscribeGameListener();timerInterval&&(clearInterval(timerInterval),timerInterval=null);showView(_0x396620(0x1cd)),document[_0x396620(0x132)][_0x396620(0x18f)][_0x396620(0x170)](_0x396620(0x1a6),_0x396620(0x16f));return;}const _0x58addf=_0x573546[_0x396620(0x1c9)](),_0x147bcb=_0x58addf[_0x396620(0x12e)];if(!isHost&&previousGameStatus===_0x396620(0x17f)&&_0x147bcb===_0x396620(0x196)){if(unsubscribeGameListener)unsubscribeGameListener();if(timerInterval)clearInterval(timerInterval);currentGameId=null,currentPlayerName=null,toast(_0x396620(0x1a5)),showView(_0x396620(0x1cd)),document[_0x396620(0x132)][_0x396620(0x18f)][_0x396620(0x170)](_0x396620(0x1a6)),previousGameStatus=null;return;}previousGameStatus=_0x147bcb;if(_0x147bcb===_0x396620(0x196))timerInterval&&(clearInterval(timerInterval),timerInterval=null),adminDisplayedPuzzleIndex=0x0,isHost?(showView('admin-lobby'),renderLobbyPlayers(_0x58addf[_0x396620(0x189)])):showView('player-wait');else{if(_0x147bcb===_0x396620(0x15a)){if(_0x58addf['gameMode']&&_0x58addf['gameMode'][_0x396620(0x159)]){const _0x21b1c7=_0x58addf[_0x396620(0x189)]||{},_0x33b19e=Object['keys'](_0x21b1c7)[_0x396620(0x11f)],_0x57c518=Object[_0x396620(0x141)](_0x21b1c7)['filter'](_0x5aa331=>_0x5aa331[_0x396620(0x145)]>=_0x58addf[_0x396620(0x19f)][_0x396620(0x159)])[_0x396620(0x11f)],_0x326744=_0x58addf[_0x396620(0x19f)][_0x396620(0x13b)]||_0x396620(0x1dc);let _0x40fd7e=![];if(_0x326744===_0x396620(0x1dc)&&_0x57c518>0x0)_0x40fd7e=!![];else _0x326744===_0x396620(0x1f2)&&_0x33b19e>0x0&&_0x57c518===_0x33b19e&&(_0x40fd7e=!![]);if(_0x40fd7e){isHost&&forceEndGame();return;}}showView(_0x396620(0x1de)),renderPlayingView(_0x58addf);}else _0x147bcb==='finished'&&(timerInterval&&(clearInterval(timerInterval),timerInterval=null),renderGameOverView(_0x58addf));}});}function renderLobbyPlayers(_0x1a82eb){const _0x427174=_0x5d43b5,_0x1c8631=Object['keys'](_0x1a82eb||{}),_0x3aad6d=_0x1c8631['length'];$(_0x427174(0x15f))['textContent']=_0x3aad6d,_0x3aad6d===0x0?lobbyPlayerNameList[_0x427174(0x140)]=_0x427174(0x1e8):lobbyPlayerNameList[_0x427174(0x140)]=_0x1c8631['map'](_0x632db6=>_0x427174(0x1ac)+_0x632db6+_0x427174(0x1db))[_0x427174(0x1b4)]('');}function startOrUpdateTimer(_0x2ebfc2){const _0x769a5a=_0x5d43b5;if(timerInterval)clearInterval(timerInterval);const _0x108e25=_0x2ebfc2[_0x769a5a(0x19f)]||gameSettings;if(_0x108e25[_0x769a5a(0x18a)]==='overall'){const _0x138c29=_0x2ebfc2[_0x769a5a(0x187)][_0x769a5a(0x171)]();timerInterval=setInterval(()=>{const _0x5ed131=_0x769a5a,_0x1fd6a3=Math[_0x5ed131(0x172)]((Date[_0x5ed131(0x15c)]()-_0x138c29)/0x3e8),_0x32f51d=_0x108e25[_0x5ed131(0x13d)]-_0x1fd6a3;if(_0x32f51d<=0x0){clearInterval(timerInterval),gameTimerEl[_0x5ed131(0x175)]=_0x5ed131(0x125);if(isHost)forceEndGame();}else{const _0x5d7710=String(Math[_0x5ed131(0x172)](_0x32f51d/0x3c))['padStart'](0x2,'0'),_0x40b318=String(_0x32f51d%0x3c)[_0x5ed131(0x1ec)](0x2,'0');gameTimerEl[_0x5ed131(0x175)]=_0x5ed131(0x134)+_0x5d7710+':'+_0x40b318;}},0x1f4);}else{const _0x39af35=isHost?Object[_0x769a5a(0x141)](_0x2ebfc2[_0x769a5a(0x189)])[_0x769a5a(0x1c3)]((_0x2d58a5,_0x59aa4f)=>(_0x59aa4f[_0x769a5a(0x145)]||0x0)-(_0x2d58a5['currentPuzzle']||0x0))[0x0]:_0x2ebfc2[_0x769a5a(0x189)][currentPlayerName];if(!_0x39af35||!_0x39af35['puzzleStartTime']){gameTimerEl[_0x769a5a(0x175)]=_0x769a5a(0x17b)+_0x108e25['timeLimit'];return;};const _0x520506=_0x39af35['puzzleStartTime'][_0x769a5a(0x171)]();timerInterval=setInterval(async()=>{const _0x5506fd=_0x769a5a,_0x164dbb=Math[_0x5506fd(0x172)]((Date[_0x5506fd(0x15c)]()-_0x520506)/0x3e8),_0x3919f4=_0x108e25[_0x5506fd(0x13d)]-_0x164dbb;if(_0x3919f4<=0x0){clearInterval(timerInterval),gameTimerEl[_0x5506fd(0x175)]=_0x5506fd(0x120);if(!isHost){toast(_0x5506fd(0x1a3));const _0x10a6c4=_0x2ebfc2[_0x5506fd(0x189)][currentPlayerName],_0x777a9=_0x10a6c4[_0x5506fd(0x145)]+0x1,_0x1a47ab={['players.'+currentPlayerName+_0x5506fd(0x1e1)]:_0x777a9};_0x777a9<_0x108e25[_0x5506fd(0x159)]?_0x1a47ab[_0x5506fd(0x12d)+currentPlayerName+_0x5506fd(0x1d5)]=serverTimestamp():_0x1a47ab[_0x5506fd(0x12d)+currentPlayerName+_0x5506fd(0x1cb)]=serverTimestamp(),await updateDoc(doc(db,'artifacts/'+appId+_0x5506fd(0x148),currentGameId),_0x1a47ab);}}else gameTimerEl[_0x5506fd(0x175)]=_0x5506fd(0x17b)+String(_0x3919f4)['padStart'](0x2,'0');},0x1f4);}}function renderPlayingView(_0x38a069){const _0x3bc79c=_0x5d43b5;document[_0x3bc79c(0x132)][_0x3bc79c(0x18f)][_0x3bc79c(0x152)](_0x3bc79c(0x16f),isHost),document[_0x3bc79c(0x132)][_0x3bc79c(0x18f)][_0x3bc79c(0x152)](_0x3bc79c(0x1a6),!isHost),startOrUpdateTimer(_0x38a069),isHost?renderAdminGameView(_0x38a069):renderPlayerGameView(_0x38a069);}function renderAdminGameView(_0x305af8){const _0x140ce4=_0x5d43b5;hostControls['classList'][_0x140ce4(0x170)](_0x140ce4(0x1c4)),toggleLeaderboardBtn[_0x140ce4(0x18f)][_0x140ce4(0x170)](_0x140ce4(0x1c4));const _0x471491=_0x305af8[_0x140ce4(0x189)]||{},_0x56a921=Object['entries'](_0x471491)[_0x140ce4(0x1c3)]((_0x41d6f0,_0x4b527a)=>(_0x4b527a[0x1]['score']||0x0)-(_0x41d6f0[0x1][_0x140ce4(0x15d)]||0x0));playerList['innerHTML']=_0x56a921[_0x140ce4(0x1aa)](([_0x391e9c,_0xc5d13])=>_0x140ce4(0x153)+_0x391e9c+_0x140ce4(0x16b)+(_0xc5d13[_0x140ce4(0x15d)]||0x0)+'\x20คะแนน\x20('+(_0xc5d13[_0x140ce4(0x145)]>=_0x305af8[_0x140ce4(0x19f)][_0x140ce4(0x159)]?_0x140ce4(0x173):_0x140ce4(0x1bf)+(_0xc5d13[_0x140ce4(0x145)]+0x1))+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20')[_0x140ce4(0x1b4)]('');const _0x160224=_0x305af8[_0x140ce4(0x19f)]?.[_0x140ce4(0x18a)]||'overall';let _0x5922a3=0x0;if(_0x160224===_0x140ce4(0x143)){const _0x4c3e5d=Math[_0x140ce4(0x19d)](0x0,...Object[_0x140ce4(0x141)](_0x471491)[_0x140ce4(0x1aa)](_0x312072=>_0x312072[_0x140ce4(0x145)]||0x0));_0x4c3e5d>adminDisplayedPuzzleIndex&&(adminDisplayedPuzzleIndex=_0x4c3e5d),_0x5922a3=adminDisplayedPuzzleIndex;}else{const _0x44054d=_0x56a921[0x0];_0x44054d&&(_0x5922a3=_0x44054d[0x1]['currentPuzzle']||0x0);}_0x5922a3=Math[_0x140ce4(0x1d3)](_0x5922a3,_0x305af8['gameMode']['numQuestions']-0x1),puzzleProgressEl['textContent']='แสดงผลด่าน\x20'+(_0x5922a3+0x1)+'\x20/\x20'+_0x305af8[_0x140ce4(0x19f)][_0x140ce4(0x159)],puzzleProgressEl[_0x140ce4(0x18f)][_0x140ce4(0x170)](_0x140ce4(0x1c4));const _0x44767d=JSON['parse'](_0x305af8[_0x140ce4(0x190)]),_0x260697=_0x44767d[_0x5922a3];gameBoard[_0x140ce4(0x18f)][_0x140ce4(0x170)](_0x140ce4(0x1c4)),playerFinishedView['classList'][_0x140ce4(0x180)]('hidden'),grid['innerHTML']=_0x260697[_0x140ce4(0x1aa)](_0x168849=>_0x140ce4(0x191)+_0x168849+_0x140ce4(0x1db))[_0x140ce4(0x1b4)](''),$$('.op')[_0x140ce4(0x198)](_0x5d7f7f=>_0x5d7f7f[_0x140ce4(0x18f)][_0x140ce4(0x180)](_0x140ce4(0x13e),_0x140ce4(0x1ea))),$('#reset-btn')[_0x140ce4(0x18f)][_0x140ce4(0x180)](_0x140ce4(0x1c4)),$(_0x140ce4(0x18d))['classList'][_0x140ce4(0x180)](_0x140ce4(0x1c4));}function renderPlayerGameView(_0x9fa43a){const _0x45e791=_0x5d43b5,_0x4b630f=_0x9fa43a['players'][currentPlayerName];if(!_0x4b630f)return;playerScoreDisplay[_0x45e791(0x175)]=_0x45e791(0x1cf)+(_0x4b630f['score']||0x0),playerScoreDisplay['classList'][_0x45e791(0x170)](_0x45e791(0x1c4));const _0x1ae4e3=_0x9fa43a[_0x45e791(0x19f)]?.[_0x45e791(0x13b)]||_0x45e791(0x1dc);if(_0x4b630f[_0x45e791(0x145)]>=_0x9fa43a[_0x45e791(0x19f)]['numQuestions'])_0x1ae4e3===_0x45e791(0x1f2)?(gameBoard[_0x45e791(0x18f)]['add'](_0x45e791(0x1c4)),playerFinishedView[_0x45e791(0x18f)][_0x45e791(0x170)](_0x45e791(0x1c4))):(gameBoard['classList']['add'](_0x45e791(0x1c4)),playerFinishedView[_0x45e791(0x18f)][_0x45e791(0x170)](_0x45e791(0x1c4)),$('#player-finished-view\x20h2')[_0x45e791(0x175)]='เสร็จสิ้น!',$('#player-finished-view\x20p')['textContent']=_0x45e791(0x1ca));else{gameBoard[_0x45e791(0x18f)][_0x45e791(0x170)](_0x45e791(0x1c4)),playerFinishedView[_0x45e791(0x18f)][_0x45e791(0x180)](_0x45e791(0x1c4)),puzzleProgressEl[_0x45e791(0x175)]=_0x45e791(0x1bf)+(_0x4b630f['currentPuzzle']+0x1)+'\x20/\x20'+_0x9fa43a['gameMode'][_0x45e791(0x159)],puzzleProgressEl[_0x45e791(0x18f)]['remove']('hidden');const _0x39ca14=JSON['parse'](_0x9fa43a[_0x45e791(0x190)]),_0x23d888=_0x39ca14[_0x4b630f[_0x45e791(0x145)]];JSON[_0x45e791(0x1d4)](currentPuzzleNumbers)!==JSON[_0x45e791(0x1d4)](_0x23d888)&&(currentPuzzleNumbers=[..._0x23d888],resetLocalBoard());}}function renderGameOverView(_0x17cad0){const _0x3e6c4c=_0x5d43b5,_0x228fe9=_0x17cad0[_0x3e6c4c(0x189)]||{},_0x40a446=Object[_0x3e6c4c(0x1b8)](_0x228fe9)['sort'](([,_0x550ee4],[,_0x3ff136])=>{const _0x5adb4a=_0x3e6c4c;if(_0x550ee4[_0x5adb4a(0x15d)]!==_0x3ff136[_0x5adb4a(0x15d)])return(_0x3ff136['score']||0x0)-(_0x550ee4[_0x5adb4a(0x15d)]||0x0);if(_0x3ff136[_0x5adb4a(0x16d)]&&_0x550ee4[_0x5adb4a(0x16d)])return _0x550ee4['finishTime']['toMillis']()-_0x3ff136[_0x5adb4a(0x16d)][_0x5adb4a(0x171)]();if(_0x3ff136[_0x5adb4a(0x16d)])return-0x1;if(_0x550ee4[_0x5adb4a(0x16d)])return 0x1;return 0x0;});podiumContainer[_0x3e6c4c(0x140)]='',otherRankingsList[_0x3e6c4c(0x140)]='';const _0x3b7f1a=_0x40a446[_0x3e6c4c(0x146)](0x0,0x3),_0x4bb38d=_0x40a446[_0x3e6c4c(0x146)](0x3);_0x3b7f1a[_0x3e6c4c(0x198)](([_0x5646b8,_0x18056a],_0x482864)=>{const _0x550585=_0x3e6c4c,_0x28239d=_0x482864+0x1,_0x37a375=document[_0x550585(0x1a9)](_0x550585(0x163));_0x37a375[_0x550585(0x1a0)]=_0x550585(0x1be)+_0x28239d,_0x37a375[_0x550585(0x140)]=_0x550585(0x1f1)+(_0x28239d===0x1?_0x550585(0x157):'')+_0x550585(0x14d)+_0x5646b8+_0x550585(0x19c)+(_0x18056a['score']||0x0)+_0x550585(0x129)+_0x28239d+_0x550585(0x177),podiumContainer[_0x550585(0x12a)](_0x37a375);});for(let _0x23c332=_0x40a446[_0x3e6c4c(0x11f)];_0x23c332<0x3;_0x23c332++){const _0xbeabc6=_0x23c332+0x1,_0x38cf1a=document[_0x3e6c4c(0x1a9)]('div');_0x38cf1a['className']=_0x3e6c4c(0x1be)+_0xbeabc6,podiumContainer[_0x3e6c4c(0x12a)](_0x38cf1a);}_0x4bb38d[_0x3e6c4c(0x11f)]>0x0?(otherRankingsContainer['classList'][_0x3e6c4c(0x170)](_0x3e6c4c(0x1c4)),otherRankingsList[_0x3e6c4c(0x140)]=_0x4bb38d['map'](([_0x3a9a46,_0x47531f],_0x39c47b)=>_0x3e6c4c(0x142)+(_0x39c47b+0x4)+'.\x20'+_0x3a9a46+_0x3e6c4c(0x197)+(_0x47531f['score']||0x0)+_0x3e6c4c(0x1a2))[_0x3e6c4c(0x1b4)]('')):otherRankingsContainer[_0x3e6c4c(0x18f)]['add']('hidden'),isHost?$(_0x3e6c4c(0x1dd))['classList'][_0x3e6c4c(0x170)](_0x3e6c4c(0x1c4)):$('#back-to-lobby-btn')[_0x3e6c4c(0x18f)]['add']('hidden'),showView(_0x3e6c4c(0x127));}function _0x3c29(_0x1a57f2,_0x113003){const _0x433187=_0x4331();return _0x3c29=function(_0x3c29ab,_0x4541ea){_0x3c29ab=_0x3c29ab-0x11e;let _0x1ebb79=_0x433187[_0x3c29ab];return _0x1ebb79;},_0x3c29(_0x1a57f2,_0x113003);}function renderLocalGrid(){const _0x504ead=_0x5d43b5;grid[_0x504ead(0x140)]='';firstIndex!==null?grid['classList']['add']('number-selected'):grid[_0x504ead(0x18f)][_0x504ead(0x170)](_0x504ead(0x158));for(let _0x355036=0x0;_0x355036<0x4;_0x355036++){const _0x34ffd7=localBoard[_0x355036],_0x2879aa=document['createElement'](_0x504ead(0x163));_0x34ffd7===null?_0x2879aa['className']=_0x504ead(0x1b1):(_0x2879aa[_0x504ead(0x1a0)]=_0x504ead(0x150)+(_0x355036===firstIndex?_0x504ead(0x1d6):''),_0x2879aa[_0x504ead(0x140)]=fmt(_0x34ffd7),_0x2879aa[_0x504ead(0x17e)](_0x504ead(0x147),()=>handleTileClick(_0x355036))),grid[_0x504ead(0x12a)](_0x2879aa);}$$(_0x504ead(0x14c))[_0x504ead(0x198)](_0x21cfa1=>_0x21cfa1[_0x504ead(0x18f)]['toggle'](_0x504ead(0x130),_0x21cfa1[_0x504ead(0x168)]['op']===selectedOp));}function resetLocalBoard(){const _0x1b114a=_0x5d43b5;localBoard=currentPuzzleNumbers[_0x1b114a(0x1aa)](_0x5e32dd=>({'n':_0x5e32dd,'d':0x1})),firstIndex=null,selectedOp=null,renderLocalGrid();}async function handleTileClick(_0x372329){const _0xf20e00=_0x5d43b5;if(localBoard[_0x372329]===null)return;if(firstIndex===_0x372329){firstIndex=null,renderLocalGrid();return;}if(firstIndex===null||selectedOp===null){firstIndex=_0x372329,renderLocalGrid();return;}const _0x57de71=localBoard[firstIndex],_0x1485fb=localBoard[_0x372329];let _0x1fb698,_0x5e3c1e,_0x4036ba;if(selectedOp==='+')_0x5e3c1e=_0x57de71['n']*_0x1485fb['d']+_0x1485fb['n']*_0x57de71['d'],_0x4036ba=_0x57de71['d']*_0x1485fb['d'];else{if(selectedOp==='-')_0x5e3c1e=_0x57de71['n']*_0x1485fb['d']-_0x1485fb['n']*_0x57de71['d'],_0x4036ba=_0x57de71['d']*_0x1485fb['d'];else{if(selectedOp==='*')_0x5e3c1e=_0x57de71['n']*_0x1485fb['n'],_0x4036ba=_0x57de71['d']*_0x1485fb['d'];else{if(selectedOp==='/'){if(_0x1485fb['n']===0x0){toast(_0xf20e00(0x160));return;}_0x5e3c1e=_0x57de71['n']*_0x1485fb['d'],_0x4036ba=_0x57de71['d']*_0x1485fb['n'];}}}}_0x4036ba<0x0&&(_0x4036ba=-_0x4036ba,_0x5e3c1e=-_0x5e3c1e);const _0x35288c=gcd(Math[_0xf20e00(0x1d1)](_0x5e3c1e),Math[_0xf20e00(0x1d1)](_0x4036ba));_0x1fb698={'n':_0x5e3c1e/_0x35288c,'d':_0x4036ba/_0x35288c},localBoard[_0x372329]=_0x1fb698,localBoard[firstIndex]=null,firstIndex=_0x372329,selectedOp=null,renderLocalGrid();const _0x68eda5=localBoard[_0xf20e00(0x185)](_0x3cdc84=>_0x3cdc84!==null);if(_0x68eda5['length']===0x1){const _0x1a9a5e=_0x68eda5[0x0];if(_0x1a9a5e['d']===0x1&&_0x1a9a5e['n']===0x18){if(isPracticeMode){toast(_0xf20e00(0x154)),setTimeout(()=>{currentPuzzleNumbers=randomSolvable(),resetLocalBoard();},0x4b0);return;}const _0x1b7423=doc(db,'artifacts/'+appId+_0xf20e00(0x148),currentGameId);try{await runTransaction(db,async _0x32d561=>{const _0x243993=_0xf20e00,_0x22eeec=await _0x32d561['get'](_0x1b7423);if(!_0x22eeec[_0x243993(0x17c)]()||_0x22eeec[_0x243993(0x1c9)]()[_0x243993(0x12e)]!==_0x243993(0x15a))return;const _0x48394c=_0x22eeec[_0x243993(0x1c9)](),_0x6126f5=_0x48394c['players'][currentPlayerName],_0x4ca047=_0x48394c[_0x243993(0x19f)]||{'scoringMode':'speed','timerMode':_0x243993(0x143)};let _0x3b1892=0x0;if(_0x4ca047[_0x243993(0x1d8)]===_0x243993(0x151))_0x3b1892=0x64;else{if(_0x4ca047[_0x243993(0x18a)]===_0x243993(0x143)){const _0x166ebf=_0x48394c[_0x243993(0x187)][_0x243993(0x171)](),_0x1dfcbf=Math[_0x243993(0x172)]((Date[_0x243993(0x15c)]()-_0x166ebf)/0x3e8);_0x3b1892=0x64+Math[_0x243993(0x19d)](0x0,_0x4ca047[_0x243993(0x13d)]-_0x1dfcbf);}else{const _0x183869=_0x6126f5[_0x243993(0x16e)][_0x243993(0x171)](),_0x31220e=Math[_0x243993(0x172)]((Date[_0x243993(0x15c)]()-_0x183869)/0x3e8);_0x3b1892=0x64+Math[_0x243993(0x19d)](0x0,_0x4ca047[_0x243993(0x13d)]-_0x31220e);}}const _0x113780=_0x6126f5[_0x243993(0x145)]+0x1,_0x121be8={[_0x243993(0x12d)+currentPlayerName+'.currentPuzzle']:_0x113780,[_0x243993(0x12d)+currentPlayerName+_0x243993(0x193)]:increment(_0x3b1892)};_0x113780<_0x4ca047[_0x243993(0x159)]?_0x121be8[_0x243993(0x12d)+currentPlayerName+'.puzzleStartTime']=serverTimestamp():_0x121be8[_0x243993(0x12d)+currentPlayerName+_0x243993(0x1cb)]=serverTimestamp(),_0x32d561['update'](_0x1b7423,_0x121be8);});}catch(_0x157e89){console[_0xf20e00(0x1bc)](_0xf20e00(0x1da),_0x157e89);}}else toast(_0xf20e00(0x162)),setTimeout(()=>{resetLocalBoard();},0x5dc);}}$(_0x5d43b5(0x192))[_0x5d43b5(0x17e)](_0x5d43b5(0x147),()=>showView(_0x5d43b5(0x14f))),$(_0x5d43b5(0x184))[_0x5d43b5(0x17e)](_0x5d43b5(0x147),()=>showView(_0x5d43b5(0x1cd))),$(_0x5d43b5(0x1c1))['addEventListener']('click',async()=>{const _0x3885ad=_0x5d43b5;$(_0x3885ad(0x186))[_0x3885ad(0x16c)]===_0x3885ad(0x13a)?(isHost=!![],await createGameRoom()):toast(_0x3885ad(0x1f4));}),$(_0x5d43b5(0x1e2))[_0x5d43b5(0x17e)]('click',handleJoinGame),$(_0x5d43b5(0x14b))[_0x5d43b5(0x17e)](_0x5d43b5(0x147),startPracticeMode),$(_0x5d43b5(0x1eb))[_0x5d43b5(0x17e)]('click',()=>{const _0x496cdb=_0x5d43b5;adminSettingsModal[_0x496cdb(0x18f)][_0x496cdb(0x170)](_0x496cdb(0x1c4));}),$('#cancel-settings-btn')[_0x5d43b5(0x17e)](_0x5d43b5(0x147),()=>{const _0x10e23e=_0x5d43b5;adminSettingsModal[_0x10e23e(0x18f)]['add'](_0x10e23e(0x1c4));}),$(_0x5d43b5(0x1c8))['addEventListener'](_0x5d43b5(0x147),handleStartGame),$(_0x5d43b5(0x167))[_0x5d43b5(0x17e)](_0x5d43b5(0x147),forceEndGame),$(_0x5d43b5(0x1dd))[_0x5d43b5(0x17e)](_0x5d43b5(0x147),returnToLobby),$(_0x5d43b5(0x18d))[_0x5d43b5(0x17e)](_0x5d43b5(0x147),()=>{isPracticeMode=![];if(unsubscribeGameListener)unsubscribeGameListener();if(timerInterval)clearInterval(timerInterval);currentGameId=null,currentPlayerName=null,showView('player-join');}),$('#reset-btn')[_0x5d43b5(0x17e)]('click',resetLocalBoard),$$(_0x5d43b5(0x14c))[_0x5d43b5(0x198)](_0x1b8053=>_0x1b8053[_0x5d43b5(0x17e)](_0x5d43b5(0x147),()=>{const _0x39b668=_0x5d43b5,_0x401237=_0x1b8053['dataset']['op'];if(selectedOp===_0x401237)selectedOp=null;else{if(firstIndex===null){toast(_0x39b668(0x1e4));return;}selectedOp=_0x401237;}renderLocalGrid();})),toggleLeaderboardBtn[_0x5d43b5(0x17e)](_0x5d43b5(0x147),()=>{const _0xbef60=_0x5d43b5,_0xfaf77=document['querySelector'](_0xbef60(0x1d2));_0xfaf77['classList'][_0xbef60(0x152)]('collapsed');const _0x2cd9ea=toggleLeaderboardBtn[_0xbef60(0x178)]('i');_0xfaf77[_0xbef60(0x18f)][_0xbef60(0x124)](_0xbef60(0x1d9))?_0x2cd9ea['className']='fas\x20fa-eye':_0x2cd9ea[_0xbef60(0x1a0)]=_0xbef60(0x1ae);}),window[_0x5d43b5(0x17e)]('beforeunload',()=>{const _0x22c17f=_0x5d43b5;if(isHost&&currentGameId){const _0x2e2520=doc(db,_0x22c17f(0x1ba)+appId+_0x22c17f(0x148),currentGameId);deleteDoc(_0x2e2520);}}),initialize(),showView(_0x5d43b5(0x1cd));
